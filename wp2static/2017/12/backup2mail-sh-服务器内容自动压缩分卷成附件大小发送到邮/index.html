<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>backup2mail.sh 服务器内容自动压缩分卷成附件大小发送到邮箱备份 - LuoJi.men</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="format-detection" content="telphone=no, email=no">
    <meta name="keywords" content="linux,pt,vps,vultr,wordpress,下载,博客,网站,脚本,邮件">
    <meta name="description" itemprop="description" content="概述 &nbsp; 本脚本目的是&gt;将vps网站内容(文件夹和数据库)分割成指定附件大小发送邮件到邮箱作为备份。 国内QQ和163邮箱无限容量,相当于永久免费备份. 适用于vps和独立服务器. 四 [&hellip;]">
    <meta name="theme-color" content="#282a2c">
    <meta itemprop="image" content="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_24bc2a7a-bcf4-4301-9b5c-6ac60d92a95c.jpg" />
        <meta name='description' content='概述 &nbsp; 本脚本目的是&gt;将vps网站内容(文件夹和数据库)分割成指定附件大小发送邮件到邮箱作为备份。 国内QQ和163邮箱无限容量,相当于永久免费备份. 适用于vps和独立服务器. 四 [&hellip;]' />
<meta name='keywords' content='linux,pt,vps,vultr,wordpress,下载,博客,网站,脚本,邮件' />
<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//cdn.seatonjiang.com' />
<link rel='dns-prefetch' href='//zz.bdstatic.com' />
<link rel='stylesheet' id='urvanov_syntax_highlighter-css'  href='/wp-content/plugins/urvanov-syntax-highlighter/css/min/urvanov_syntax_highlighter.min.css?ver=2.8.27' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='/wp-content/plugins/urvanov-syntax-highlighter/themes/classic/classic.css?ver=2.8.27' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='/wp-content/plugins/urvanov-syntax-highlighter/fonts/monaco.css?ver=2.8.27' type='text/css' media='all' />
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style>
<link rel='stylesheet' id='bootstrap-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/assets/css/bootstrap.min.css?ver=4.5.0' type='text/css' media='all' />
<link rel='stylesheet' id='kicon-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/assets/css/iconfont.min.css?ver=4.1.2' type='text/css' media='all' />
<link rel='stylesheet' id='layer-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/assets/css/layer.min.css?ver=3.1.1' type='text/css' media='all' />
<link rel='stylesheet' id='lightgallery-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/assets/css/lightgallery.min.css?ver=1.4.0' type='text/css' media='all' />
<link rel='stylesheet' id='kratos-css'  href='https://cdn.seatonjiang.com/kratos/4.1.2/style.css?ver=4.1.2' type='text/css' media='all' />
<style id='kratos-inline-css' type='text/css'>

        @media screen and (min-width: 992px) {
            .k-nav .navbar-brand h1 {
                color: #ffffff;
            }
            .k-nav .navbar-nav > li.nav-item > a {
                color: #ffffff;
            }
        }
        
.sticky-sidebar {
                position: sticky;
                top: 8px;
                height: 100%;
            }
</style>
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.luoji.men%2F2017%2F12%2Fbackup2mail-sh-%25e6%259c%258d%25e5%258a%25a1%25e5%2599%25a8%25e5%2586%2585%25e5%25ae%25b9%25e8%2587%25aa%25e5%258a%25a8%25e5%258e%258b%25e7%25bc%25a9%25e5%2588%2586%25e5%258d%25b7%25e6%2588%2590%25e9%2599%2584%25e4%25bb%25b6%25e5%25a4%25a7%25e5%25b0%258f%25e5%258f%2591%25e9%2580%2581%25e5%2588%25b0%25e9%2582%25ae%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.luoji.men%2F2017%2F12%2Fbackup2mail-sh-%25e6%259c%258d%25e5%258a%25a1%25e5%2599%25a8%25e5%2586%2585%25e5%25ae%25b9%25e8%2587%25aa%25e5%258a%25a8%25e5%258e%258b%25e7%25bc%25a9%25e5%2588%2586%25e5%258d%25b7%25e6%2588%2590%25e9%2599%2584%25e4%25bb%25b6%25e5%25a4%25a7%25e5%25b0%258f%25e5%258f%2591%25e9%2580%2581%25e5%2588%25b0%25e9%2582%25ae%2F&#038;format=xml" />
<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><!-- 谷歌收录的验证方式 -->
<meta name="google-site-verification" content="XxPfUFFG0MmfvRUNs2AFXHfRXRx_xVLXdD_6Si95rJ0" />
<!-- bing收录验证luojimen.netlify.app -->
<meta name="msvalidate.01" content="508C6C00EA05098C32CD4DB253B3CB66" />
<!-- baidu收录验证luojimen.netlify.app -->
<meta name="baidu-site-verification" content="code-DlUhxrKYUP" />
		
		<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', '');
		</script>

				<script type="text/javascript">
		var _hmt = _hmt || [];
				_hmt.push(['_trackPageview']);
						(function() {
		var hm = document.createElement("script");
		hm.src = "//hm.baidu.com/hm.js?cff4b8fde8a7abf46d402c4fd284f0cc";
		hm.setAttribute('async', 'true');
		document.getElementsByTagName('head')[0].appendChild(hm);
		})();
		</script>
		    <script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/jquery.min.js?ver=3.4.1' id='jquery-js'></script>
    </head>

<body>
    <script type="text/javascript">  
    $(function() {  
    $('.content img').each(function(i){  
        if (! this.parentNode.href) {  
            $(this).wrap("<a href='"+this.src+"' class='highslide-image' onclick='return hs.expand(this);'></a>");  
                                    }  
                                            });  
                });  
    </script> 
    <div class="k-header">
        <nav class="k-nav navbar navbar-expand-lg navbar-light fixed-top" style="background:#1e73be">
            <div class="container">
                <a class="navbar-brand" href="http://luojimen.netlify.app">
                    <h1>LuoJi.men</h1>                </a>
                                    <button class="navbar-toggler navbar-toggler-right" id="navbutton" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="line first-line"></span>
                        <span class="line second-line"></span>
                        <span class="line third-line"></span>
                    </button>
                <div id="navbarResponsive" class="collapse navbar-collapse"><ul id="menu-menu-1" class="navbar-nav ml-auto"><li class="nav-item" ><a title="首页" href="https://luoji.men/" class="nav-link">首页</a></li>
<li class="nav-item" ><a title="在线工具站" href="/online-tool-station/" class="nav-link">在线工具站</a></li>
<li class="nav-item" ><a title="运维log" href="/%e8%bf%90%e7%bb%b4log/" class="nav-link">运维log</a></li>
<li class="nav-item" ><a title="归档时间轴" href="/time/" class="nav-link">归档时间轴</a></li>
</ul></div>            </div>
        </nav>
            </div>
<div class="k-main color" style="background:#f5f5f5">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 details">
                                    <div class="article">
                        <div class="breadcrumb-box">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item">
                                    <a class="text-dark" href="https://luojimen.netlify.app"> 首页</a>
                                </li>
                                <li class="breadcrumb-item"> <a class="text-dark" href="/category/linux/">Linux</a></li>                                <li class="breadcrumb-item active" aria-current="page"> 正文</li>
                            </ol>
                        </div>
                        <div class="header">
                            <h1 class="title">backup2mail.sh 服务器内容自动压缩分卷成附件大小发送到邮箱备份</h1>
                            <div class="meta">
                                <span>2017年12月7日</span>
                                                                    <span>425点热度</span>
                                                                                            </div>
                        </div>
                        <div class="content" id="lightgallery">
                            <div style="margin-bottom:5px"><a href="" target="_blank" rel="noreferrer"><img src=""></a></div><h2 ><a name="toc-1"></a>概述</h2>
<div><img class="alignnone size-full wp-image-2203" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_24bc2a7a-bcf4-4301-9b5c-6ac60d92a95c.jpg" width="725" height="183" alt="039c280ff790f5ba515130334672ed98_24bc2a7a-bcf4-4301-9b5c-6ac60d92a95c" title="039c280ff790f5ba515130334672ed98_24bc2a7a-bcf4-4301-9b5c-6ac60d92a95c" /></p>
<div>&nbsp;</div>
</div>
<div>本脚本目的是&gt;将vps网站内容(文件夹和数据库)分割成指定附件大小发送邮件到邮箱作为<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">备份</span>。</div>
<div>国内QQ和163邮箱无限容量,相当于永久免费备份.</div>
<div>适用于vps和独立服务器.</div>
<div></div>
<div><b style="font-size: 1rem; line-height: 1.6;">四步流程概览&gt;&gt;&gt;</b></div>
<div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">1&gt;安装配置mutt邮件发送程序</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">2&gt;安装7z压缩程序</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">3&gt;修改backup2mail.sh脚本(收件人,要备份的文件夹,数据库等用户信息)</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">4<span style="font-size: 1rem; line-height: 1.6;">&gt;执行<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">backup2mail.sh</span>脚本</span></div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"></div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">(tips:末尾文献部分是博主在研究这个脚本时所参考浏览过的文章.)</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"></div>
</div>
<div class="wiz-table-container" style="position: relative; padding: 0px;">
<div class="wiz-table-body">
<table style="width: 506px;">
<tbody>
<tr>
<td align="left" valign="middle" style="width: 506px;" class="" rowspan="1" colspan="2"><b>邮箱选择:163.<br />建议用国内邮箱附件主流50M,比国外主流30M附件容量多70%,这样生成的分割邮件会少很多.</b></td>
</tr>
<tr style="height: 67px;">
<td align="left" valign="middle" style="width: 115px;" class="">QQ邮箱<br />50M/附件</td>
<td align="left" valign="middle" style="width: 390px;" class="">优点: 收件比163快,经测试每天都能收到附件，并没有被拒收.<br />缺点: 自定义文件夹必须折叠，每次要点击两次。</td>
</tr>
<tr>
<td align="left" valign="middle" style="width: 115px;" class="">163邮箱&nbsp;<br />50M/附件</td>
<td align="left" valign="middle" style="width: 390px;" class="">优点:自定义文件夹可以置顶，直接点击进入.<br />缺点:45M的压缩包接收比较慢,需要几十分钟，5M附件的邮件倒是能正常快速收到.实际延时测试&gt;大约是22:09收到第一份5M附件邮件，22:16分收到45M附件邮件,相隔7分钟。</td>
</tr>
</tbody>
</table>
</div>
</div>
<div>
<div></div>
<div class="wiz-table-container" style="margin: 0px; color: rgb(0, 0, 0); font-family: Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; font-weight: normal; text-align: start; text-indent: 0px; padding: 0px; position: relative;">
<div class="wiz-table-body" style="margin:0px;padding:10px 0px;">
<table style="margin:0px;width:757px;">
<tbody>
<tr>
<td rowspan="1" colspan="2" style="padding:4px 8px;width:756px;" class=""><b>数据库是否选择压缩:压缩.(压缩后体积大约是未压缩的20%)</b></td>
</tr>
<tr>
<td style="padding:4px 8px;width:90px;"></td>
<td style="padding:4px 8px;width:666px;">备份命令mysqldump格式:<br />格式：mysqldump -h主机名&nbsp; -P端口 -u用户名 -p密码 –database 数据库名 &gt; 文件名.sql<span class="Apple-converted-space">&nbsp;</span></td>
</tr>
<tr>
<td align="left" valign="middle" style="padding:4px 8px;width:90px;">不压缩<br />1.48M</td>
<td align="left" valign="middle" style="padding:4px 8px;width:666px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:-webkit-left;text-indent:0px;display:inline !important;">mysqldump -u数据库用户名 -p数据库密码 数据库名 &gt; sqlbakup.sql</span></td>
</tr>
<tr>
<td align="left" valign="middle" style="padding:4px 8px;width:90px;">gz压缩后<br />300.41K</td>
<td align="left" valign="middle" style="padding:4px 8px;width:666px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:-webkit-left;text-indent:0px;display:inline !important;">mysqldump -u<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:-webkit-left;text-indent:0px;display:inline !important;">数据库用户名</span> -p<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:-webkit-left;text-indent:0px;display:inline !important;">数据库密码</span>&nbsp;<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:-webkit-left;text-indent:0px;display:inline !important;">数据库名</span> | gzip &gt; sqlbakup.sql.gz</span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div></div>
</div>
<div><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;"></p>
<div class="wiz-table-container" style="position: relative; padding: 0px;">
<div class="wiz-table-body">
<table style="width: 741px;">
<tbody>
<tr>
<td style="width: 740px;" class="" rowspan="1" colspan="3"><b>文件夹压缩格式选择:7zip.<br />linux自带的tar.gz分卷方式在windwos下合并比较麻烦,需要敲命令.因此选用压缩率比较高的7z格式做分卷处理.(zip的压缩率太低,作为邮箱备份目的不在此考虑.)</b></td>
</tr>
<tr>
<td class="" style="width: 104px;">原始文件夹体积</td>
<td style="width: 87px;" class="">201 MB</td>
<td style="width: 551px;" class="">命令简介</td>
</tr>
<tr>
<td class="" style="width: 104px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">7za压缩后</span></td>
<td style="width: 87px;" class="">64.43 MB</td>
<td style="width: 551px;" class="">centos安装7z：yum install p7zip </p>
<p>分卷：7za -v45M a /要存在哪个文件夹/文件名 /要压缩的目标文件夹<br /><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">参数 -bt：显示执行时间统计信息<br /></span></p>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">
<div style="margin:0px;">#默认<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">等级</span>压缩:</div>
<div style="margin:0px;"><span style="font-size: 1rem; line-height: 1.6;">7za a /root/mail-test/zip/test2 /www/wwwroot/www.luoji.men&nbsp;</span><img src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_a380fc3e-f38b-4898-875e-f790e32dbfc4.jpg" style="font-size: 1rem; line-height: 1.6;"></div>
<div style="margin:0px;">[注*:"a"命令是添加已有，不反馈删除，因此需要作为脚本使用是需要先删除已存在压缩包]</div>
<div style="margin:0px;"></div>
<div style="margin:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">#指定<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">等级</span>压缩:</span></div>
<div style="margin:0px;"><span style="font-size: 1rem; line-height: 1.6;">7za -mx=5 a /root/mail-test/zip/test8&nbsp; /www/wwwroot/www.luoji.men</span><img src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_a2ac7c47-4bd4-49d5-8035-dd9ad12a0f64.jpg" style="font-size: 1rem; line-height: 1.6;" class=""><span style="font-size: 1rem; line-height: 1.6;">-mx=0等于不压缩（参数1-9（看内存，我<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">vultr</span>的vps只能使用最高等级5压缩）</span></div>
<div style="margin:0px;"></p>
<div style="margin:0px;">#分卷压缩，支持直接使用目录</div>
</div>
</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">7za -v45M a /root/mail-test/zip/test5 /www/wwwroot/www.luoji.men</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><img loading="lazy" class="alignnone size-full wp-image-2205" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_507e1f14-1fee-464b-a488-9352e8687729.jpg" width="393" height="100" alt="039c280ff790f5ba515130334672ed98_507e1f14-1fee-464b-a488-9352e8687729" title="039c280ff790f5ba515130334672ed98_507e1f14-1fee-464b-a488-9352e8687729" /></div>
</td>
</tr>
<tr>
<td class="" style="width: 104px;">zip压缩后</td>
<td style="width: 87px;" class="">95.24 MB</td>
<td style="width: 551px;" class="">压缩：zip -r /root/mail-test/zip/test.zip /root/mail-test/file/*<br />分卷：zip -s 200k file.zip --out ziptest &nbsp; &nbsp;#分卷成200k一包<br /><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">（注*:zip分卷需要先压缩成zip才能分卷）</span></td>
</tr>
<tr>
<td class="" style="width: 104px;">BT宝塔备份<br />tar.gz</td>
<td style="width: 87px;" class="">84.41 MB</td>
<td style="width: 551px;" class=""></td>
</tr>
<tr>
<td align="left" valign="middle" style="width: 104px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">tar -jcvf<br /></span>bz2</td>
<td align="left" valign="middle" style="width: 87px;" class="">79.56 MB</td>
<td align="left" valign="middle" style="width: 551px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">tar -jcvf<span class="Apple-converted-space"> </span></span><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">/root/mail-test/zip/tar-test.tar.bz2</span><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;"> </span><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;"><span class="Apple-converted-space"><span class="Apple-converted-space"> </span></span>/root/mail-test/file/ <br /></span><img loading="lazy" class="alignnone size-full wp-image-2208" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_d90350ee-f9e3-4271-b912-a593eb2b8edf.jpg" width="425" height="36" alt="039c280ff790f5ba515130334672ed98_d90350ee-f9e3-4271-b912-a593eb2b8edf" title="039c280ff790f5ba515130334672ed98_d90350ee-f9e3-4271-b912-a593eb2b8edf" /></td>
</tr>
<tr>
<td align="left" valign="middle" style="width: 104px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">tar -zcvf<span class="Apple-converted-space"> <br /></span></span>tgz</td>
<td align="left" valign="middle" style="width: 87px;" class="">87.50 MB</td>
<td align="left" valign="middle" style="width: 551px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">tar -zcvf<span class="Apple-converted-space"> </span></span><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">/root/mail-test/zip/tar-test.tgz </span><span class="Apple-converted-space" style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="Apple-converted-space"><span class="Apple-converted-space"> </span><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">/www/wwwroot/www.luoji.men<br /></span></span></span><img loading="lazy" class="alignnone size-full wp-image-2204" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_37cc033a-b3c2-46f8-840b-9d20fea2a8ab.jpg" width="393" height="36" alt="039c280ff790f5ba515130334672ed98_37cc033a-b3c2-46f8-840b-9d20fea2a8ab" title="039c280ff790f5ba515130334672ed98_37cc033a-b3c2-46f8-840b-9d20fea2a8ab" /></td>
</tr>
</tbody>
</table>
</div>
</div>
<p></span></div>
<div class="wiz-table-container" style="margin: 0px; padding: 0px; position: relative;">
<div class="wiz-table-body" style="margin:0px;padding:10px 0px;">
<table style="margin:0px;width:585px;">
<tbody>
<tr>
<td rowspan="1" colspan="2" style="padding:4px 8px;width:119px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;display:inline !important;"><b>压缩方式耗时对比:7z虽然压缩率高，但耗时确实很长。不过自用服务器负荷很小，虽然7z耗时长，但是压缩后的体积小，便于邮箱存放，适合作为每日发到邮箱备份。</b></span></td>
</tr>
<tr>
<td align="left" valign="middle" style="padding:4px 8px;width:119px;">测试压缩所用的文件夹体积</td>
<td align="left" valign="middle" style="padding:4px 8px;width:466px;"><img loading="lazy" class="alignnone size-full wp-image-2209" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_6a464497-f1e0-4feb-9b6a-b27a646d38c6.jpg" width="526" height="45" alt="039c280ff790f5ba515130334672ed98_6a464497-f1e0-4feb-9b6a-b27a646d38c6" title="039c280ff790f5ba515130334672ed98_6a464497-f1e0-4feb-9b6a-b27a646d38c6" /><img loading="lazy" class="alignnone size-full wp-image-2211" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_80115811-c37c-4099-8b4e-1a4ea46f73a4.png" width="766" height="407" alt="039c280ff790f5ba515130334672ed98_80115811-c37c-4099-8b4e-1a4ea46f73a4" title="039c280ff790f5ba515130334672ed98_80115811-c37c-4099-8b4e-1a4ea46f73a4" /></td>
</tr>
<tr>
<td align="left" valign="middle" style="padding:4px 8px;width:119px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">7z.zip.tar</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">耗时3分25秒</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">（不发邮件）</span></td>
<td align="left" valign="middle" style="padding:4px 8px;width:466px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-indent:0px;text-align:start;display:inline !important;">time backup.sh 同时使用三种压缩方式总耗时3分25秒（不发邮件）</span><img loading="lazy" class="alignnone size-full wp-image-2213" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_c1f5416b-474c-443e-ab0a-a10b3eb15e3a.jpg" width="184" height="60" alt="039c280ff790f5ba515130334672ed98_c1f5416b-474c-443e-ab0a-a10b3eb15e3a" title="039c280ff790f5ba515130334672ed98_c1f5416b-474c-443e-ab0a-a10b3eb15e3a" /></td>
</tr>
<tr>
<td align="left" valign="middle" style="padding:4px 8px;width:119px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">7z.zip.tar</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">耗时5分10秒</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">（发邮件）</span></td>
<td align="left" valign="middle" style="padding:4px 8px;width:466px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-indent:0px;text-align:start;display:inline !important;">&nbsp;</span><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-indent:0px;text-align:start;">time backup2mail.sh 同时使用三种压缩方式总耗时5分10秒（发邮件）</span><img loading="lazy" class="alignnone size-full wp-image-2210" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_77a89881-1434-4218-9638-7e52d7ed9573.jpg" width="187" height="65" alt="039c280ff790f5ba515130334672ed98_77a89881-1434-4218-9638-7e52d7ed9573" title="039c280ff790f5ba515130334672ed98_77a89881-1434-4218-9638-7e52d7ed9573" /></td>
</tr>
<tr>
<td align="left" valign="middle" style="padding:4px 8px;width:119px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">7z</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">耗时3分17秒</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">（不发邮件）</span></td>
<td align="left" valign="middle" style="padding:4px 8px;width:466px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-indent:0px;text-align:start;display:inline !important;">time backup.sh<span class="Apple-converted-space"><span class="Apple-converted-space">&nbsp;</span></span></span><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-indent:0px;text-align:start;display:inline !important;">仅使用7z压缩方式耗时3分17秒（不发邮件）&nbsp;</span><img loading="lazy" class="alignnone size-full wp-image-2212" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_0c600fb8-ef8e-46be-a062-67ce7f714473.jpg" width="191" height="63" alt="039c280ff790f5ba515130334672ed98_0c600fb8-ef8e-46be-a062-67ce7f714473" title="039c280ff790f5ba515130334672ed98_0c600fb8-ef8e-46be-a062-67ce7f714473" /></td>
</tr>
<tr>
<td align="left" valign="middle" style="padding:4px 8px;width:119px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">zip</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">耗时52秒</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">（不发邮件）</span></td>
<td align="left" valign="middle" style="padding:4px 8px;width:466px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">time backup.sh</span><span class="Apple-converted-space" style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="Apple-converted-space">&nbsp;仅使用</span></span><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">zip压缩耗时52秒（不发邮件）</span><img src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_0a1151e3-bc63-48ab-83ab-e3bca98e5dc9.jpg" style="margin:2px 0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"></td>
</tr>
<tr>
<td align="left" valign="middle" style="padding:4px 8px;width:119px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">tar</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">耗时17秒</span><br style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">（不发邮件）</span></td>
<td align="left" valign="middle" style="padding:4px 8px;width:466px;" class=""><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">time backup.sh</span><span class="Apple-converted-space" style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span class="Apple-converted-space">&nbsp;仅使用</span></span><span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">tar压缩耗时17秒（不发邮件）</span><img loading="lazy" class="alignnone size-full wp-image-2215" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_a2a82c7c-2562-45d0-975f-28cb0a24985f.jpg" width="188" height="63" alt="039c280ff790f5ba515130334672ed98_a2a82c7c-2562-45d0-975f-28cb0a24985f" title="039c280ff790f5ba515130334672ed98_a2a82c7c-2562-45d0-975f-28cb0a24985f" /></td>
</tr>
</tbody>
</table>
</div>
</div>
<div style="margin:0px;">
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"></div>
<hr>
</div>
<h2 ><a name="toc-2"></a>安装mutt邮件发送服务</h2>
<div></div>
<div><b>centos使用yum一条命令就安装完成</b></div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734300_4327"></p><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed62290291064003" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
yum install -y mutt</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed62290291064003-1">1</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed62290291064003-1"><span class="crayon-e">yum </span><span class="crayon-v">install</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">y</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p></p>
<div></div>
</div>
<div><b>设置主机名</b></div>
<div>临时# hostname www.luoji.men 否则aliyun邮箱和gmail邮箱拒收(连垃圾邮箱都不给进).</div>
<div> 成功后可修改成永久</div>
<div></div>
<div><b>设置发件人</b></div>
<div><span style="color: inherit; font-size: 1rem; line-height: 1.6;">默认设置很可能被作为作为垃圾邮件甚至拒收，</span></div>
<div>编辑 vi /etc/Muttrc</div>
<div>在开头添加发件人信息 ：</div>
<div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734272_1177"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed62298275910871" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
set from="mutt@www.luoji.men"
set use_from=yes
set envelope_from="yes"
set realname="mutt"
</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed62298275910871-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed62298275910871-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed62298275910871-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed62298275910871-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed62298275910871-5">5</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed62298275910871-1"><span class="crayon-e">set </span><span class="crayon-v">from</span><span class="crayon-o">=</span><span class="crayon-s">"mutt@www.luoji.men"</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed62298275910871-2"><span class="crayon-e">set </span><span class="crayon-v">use_from</span><span class="crayon-o">=</span><span class="crayon-e">yes</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed62298275910871-3"><span class="crayon-e">set </span><span class="crayon-v">envelope_from</span><span class="crayon-o">=</span><span class="crayon-s">"yes"</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed62298275910871-4"><span class="crayon-e">set </span><span class="crayon-v">realname</span><span class="crayon-o">=</span><span class="crayon-s">"mutt"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed62298275910871-5">&nbsp;</div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
</p>
<div></div>
</div>
</div>
<div>编辑 vi /etc/Muttrc.local</div>
<div><b>添加set copy = no参数</b>,意思是取消附件的拷贝</div>
<div class="wiz-code-container" data-mode="HTML" data-theme="default" id="wiz_cm_1512649734236_711"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed6229a467622956" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
# Local configuration for Mutt.
set copy = no

set copy=no #不生成sent文件 sent为附件的拷贝累加 这个文件体积会变得很大 使用一个月已经6g大小</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed6229a467622956-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed6229a467622956-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed6229a467622956-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed6229a467622956-4">4</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed6229a467622956-1"><span class="crayon-p"># Local configuration for Mutt.</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed6229a467622956-2"><span class="crayon-e">set </span><span class="crayon-v">copy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">no</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed6229a467622956-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed6229a467622956-4"><span class="crayon-e">set </span><span class="crayon-v">copy</span><span class="crayon-o">=</span><span class="crayon-i">no</span><span class="crayon-h"> </span><span class="crayon-p">#不生成sent文件 sent为附件的拷贝累加 这个文件体积会变得很大 使用一个月已经6g大小</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><span style="font-size:1rem;"><b>测试mutt发送邮件</b>查看对方服务器是否能收到：</span></div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">格式是：文本、标题、邮箱</div>
</div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734214_5361"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed6229c032215996" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[root@VIRMACH ~]# echo "Text" | mutt -s "virmach" "xxxx@163.com" 
[root@VIRMACH ~]# </textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed6229c032215996-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed6229c032215996-2">2</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed6229c032215996-1"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-v">VIRMACH</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-sy">]</span><span class="crayon-p"># echo "Text" | mutt -s "virmach" "xxxx@163.com" </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed6229c032215996-2"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-v">VIRMACH</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-sy">]</span><span class="crayon-p"># </span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div><img loading="lazy" class="alignnone size-full wp-image-2216" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_8de41a3d-721a-4bde-90c5-051457d65af2.jpg" width="298" height="250" alt="039c280ff790f5ba515130334672ed98_8de41a3d-721a-4bde-90c5-051457d65af2" title="039c280ff790f5ba515130334672ed98_8de41a3d-721a-4bde-90c5-051457d65af2" /><span style="font-size:1rem;">&nbsp;</span><span style="font-size:1rem;">&nbsp;</span></div>
<div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="font-size:1rem;"></p>
<div></div>
<p></span></div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><span style="font-size:1rem;"><b>接着测试mutt发送附件</b>：</p>
<div style="font-weight:normal;">&nbsp;<span style="font-size:1rem;">格式是：文本、标题、邮箱、附件（-a 附件必须放在最后面，否则报错）</span></div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734173_8313"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed6229e290950648" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
正确语法 echo "Test" | mutt -s "mysql backup" xxxx@qq.com -a /fujian.txt
错误语法 echo "Test" | mutt -s "mysql backup" -a /fujian.txt xxxx@qq.com</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed6229e290950648-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed6229e290950648-2">2</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed6229e290950648-1">正确语法<span class="crayon-h"> </span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"Test"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"mysql backup"</span><span class="crayon-h"> </span><span class="crayon-v">xxxx</span><span class="crayon-sy">@</span><span class="crayon-v">qq</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">fujian</span><span class="crayon-sy">.</span><span class="crayon-i">txt</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed6229e290950648-2">错误语法<span class="crayon-h"> </span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"Test"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"mysql backup"</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">fujian</span><span class="crayon-sy">.</span><span class="crayon-e">txt </span><span class="crayon-v">xxxx</span><span class="crayon-sy">@</span><span class="crayon-v">qq</span><span class="crayon-sy">.</span><span class="crayon-v">com</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
</p>
<div></div>
</div>
<div style="font-weight:normal;"><span style="font-size:1rem;">新建一个 vi fujian.txt 文档</span></div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734147_2553"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed6229f080065884" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[root@VIRMACH ~]# ls
fujian.txt</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed6229f080065884-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed6229f080065884-2">2</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed6229f080065884-1"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-v">VIRMACH</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-sy">]</span><span class="crayon-p"># ls</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed6229f080065884-2"><span class="crayon-v">fujian</span><span class="crayon-sy">.</span><span class="crayon-v">txt</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div style="font-weight:normal;">查询当前路径:</div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734114_9781"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622a1174532544" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[root@VIRMACH ~]# pwd
/root</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622a1174532544-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622a1174532544-2">2</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622a1174532544-1"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-v">VIRMACH</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-sy">]</span><span class="crayon-p"># pwd</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622a1174532544-2"><span class="crayon-o">/</span><span class="crayon-v">root</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<p></span></div>
<div style="margin:0px;"></div>
<div style="margin:0px;">
<div>发送附件</div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734092_5165"></p><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622a2300958574" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
echo "Text" | mutt -s "Title" "xxxxx@163.com" -a "/root/fujian.txt"</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622a2300958574-1">1</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622a2300958574-1"><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"Text"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"Title"</span><span class="crayon-h"> </span><span class="crayon-s">"xxxxx@163.com"</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-s">"/root/fujian.txt"</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p></p>
<div></div>
</div>
</div>
<p>大约1分钟后,邮箱应当收到这封带有附件的邮件&gt;</p></div>
<div><img loading="lazy" class="alignnone size-full wp-image-2219" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_204cd097-3be1-4a26-9875-f12be89ae74e.jpg" width="342" height="59" alt="039c280ff790f5ba515130334672ed98_204cd097-3be1-4a26-9875-f12be89ae74e" title="039c280ff790f5ba515130334672ed98_204cd097-3be1-4a26-9875-f12be89ae74e" /></p>
<div>&nbsp;<img loading="lazy" class="alignnone size-full wp-image-2217" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_99ac2100-d6f2-4630-b035-6e11513c7c49.jpg" width="302" height="375" alt="039c280ff790f5ba515130334672ed98_99ac2100-d6f2-4630-b035-6e11513c7c49" title="039c280ff790f5ba515130334672ed98_99ac2100-d6f2-4630-b035-6e11513c7c49" /></p>
<div>&nbsp;</div>
<hr>
</div>
<h2 ><a name="toc-3"></a>安装7z压缩</h2>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734071_7114"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622a3100206459" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
centos安装7z：yum install p7zip </textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622a3100206459-1">1</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622a3100206459-1"><span class="crayon-i">centos</span>安装<span class="crayon-cn">7z</span>：<span class="crayon-e">yum </span><span class="crayon-e">install </span><span class="crayon-i">p7zip</span><span class="crayon-h"> </span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><b>测试7z分卷:</b></div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">新建两个测试目录并在其中放进一个10M左右的文件</div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734045_3400"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622a5479946813" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[root@VIRMACH temp]# mkdir output7z
[root@VIRMACH temp]# mkdir source &amp;&amp; cd source
[root@VIRMACH source]# wget https://wordpress.org/latest.tar.gz</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622a5479946813-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622a5479946813-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622a5479946813-3">3</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622a5479946813-1"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">temp</span><span class="crayon-sy">]</span><span class="crayon-p"># mkdir output7z</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622a5479946813-2"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">temp</span><span class="crayon-sy">]</span><span class="crayon-p"># mkdir source &amp;&amp; cd source</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622a5479946813-3"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">source</span><span class="crayon-sy">]</span><span class="crayon-p"># wget https://wordpress.org/latest.tar.gz</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"><span style="font-size:1rem;">查看文件体积</span></div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649734020_7052"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622a6757307033" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[root@VIRMACH source]# ls -lh
total 9.2M
-rw-r--r-- 1 root root 9.2M Nov 30 03:07 latest.tar.gz</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622a6757307033-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622a6757307033-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622a6757307033-3">3</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622a6757307033-1"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">source</span><span class="crayon-sy">]</span><span class="crayon-p"># ls -lh</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622a6757307033-2"><span class="crayon-i">total</span><span class="crayon-h"> </span><span class="crayon-cn">9.2M</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622a6757307033-3"><span class="crayon-o">-</span><span class="crayon-v">rw</span><span class="crayon-o">-</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">9.2M</span><span class="crayon-h"> </span><span class="crayon-i">Nov</span><span class="crayon-h"> </span><span class="crayon-cn">30</span><span class="crayon-h"> </span><span class="crayon-cn">03</span><span class="crayon-o">:</span><span class="crayon-cn">07</span><span class="crayon-h"> </span><span class="crayon-v">latest</span><span class="crayon-sy">.</span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">gz</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
</p>
<div></div>
</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">查看当前完整路径</div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649733991_1"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622a8444873770" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[root@VIRMACH source]# pwd      
/root/temp/source</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622a8444873770-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622a8444873770-2">2</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622a8444873770-1"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">source</span><span class="crayon-sy">]</span><span class="crayon-p"># pwd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622a8444873770-2"><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">temp</span><span class="crayon-o">/</span><span class="crayon-v">source</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">分卷压缩命令</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">格式:7za -v分卷大小 a /压缩包存放文件夹/压缩包名 /需要分卷压缩的文件夹</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">分卷成2M大小测试</div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649733971_9504"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622a9230341397" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
7za -v2M a /root/temp/output7z/source2p7z /root/temp/source/</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622a9230341397-1">1</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622a9230341397-1"><span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">v2M</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">temp</span><span class="crayon-o">/</span><span class="crayon-v">output7z</span><span class="crayon-o">/</span><span class="crayon-v">source2p7z</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">temp</span><span class="crayon-o">/</span><span class="crayon-v">source</span><span class="crayon-o">/</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">进入/root/temp/output7z/查看是否正确生成分卷压缩包,如下<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">分割</span>分卷无误&gt;</div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649733941_8637"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622ab486066268" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[root@VIRMACH output7z]#cd /root/temp/output7z/
[root@VIRMACH output7z]# ls -lh
total 9.1M
-rw-r--r-- 1 root root 2.0M Dec  7 15:44 source2p7z.7z.001
-rw-r--r-- 1 root root 2.0M Dec  7 15:44 source2p7z.7z.002
-rw-r--r-- 1 root root 2.0M Dec  7 15:44 source2p7z.7z.003
-rw-r--r-- 1 root root 2.0M Dec  7 15:44 source2p7z.7z.004
-rw-r--r-- 1 root root 1.1M Dec  7 15:44 source2p7z.7z.005</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ab486066268-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ab486066268-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ab486066268-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ab486066268-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ab486066268-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ab486066268-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ab486066268-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ab486066268-8">8</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ab486066268-1"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">output7z</span><span class="crayon-sy">]</span><span class="crayon-p">#cd /root/temp/output7z/</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ab486066268-2"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">output7z</span><span class="crayon-sy">]</span><span class="crayon-p"># ls -lh</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ab486066268-3"><span class="crayon-i">total</span><span class="crayon-h"> </span><span class="crayon-cn">9.1M</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ab486066268-4"><span class="crayon-o">-</span><span class="crayon-v">rw</span><span class="crayon-o">-</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">2.0M</span><span class="crayon-h"> </span><span class="crayon-i">Dec</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">15</span><span class="crayon-o">:</span><span class="crayon-cn">44</span><span class="crayon-h"> </span><span class="crayon-v">source2p7z</span><span class="crayon-sy">.</span><span class="crayon-cn">7z.001</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ab486066268-5"><span class="crayon-o">-</span><span class="crayon-v">rw</span><span class="crayon-o">-</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">2.0M</span><span class="crayon-h"> </span><span class="crayon-i">Dec</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">15</span><span class="crayon-o">:</span><span class="crayon-cn">44</span><span class="crayon-h"> </span><span class="crayon-v">source2p7z</span><span class="crayon-sy">.</span><span class="crayon-cn">7z.002</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ab486066268-6"><span class="crayon-o">-</span><span class="crayon-v">rw</span><span class="crayon-o">-</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">2.0M</span><span class="crayon-h"> </span><span class="crayon-i">Dec</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">15</span><span class="crayon-o">:</span><span class="crayon-cn">44</span><span class="crayon-h"> </span><span class="crayon-v">source2p7z</span><span class="crayon-sy">.</span><span class="crayon-cn">7z.003</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ab486066268-7"><span class="crayon-o">-</span><span class="crayon-v">rw</span><span class="crayon-o">-</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">2.0M</span><span class="crayon-h"> </span><span class="crayon-i">Dec</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">15</span><span class="crayon-o">:</span><span class="crayon-cn">44</span><span class="crayon-h"> </span><span class="crayon-v">source2p7z</span><span class="crayon-sy">.</span><span class="crayon-cn">7z.004</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ab486066268-8"><span class="crayon-o">-</span><span class="crayon-v">rw</span><span class="crayon-o">-</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">1.1M</span><span class="crayon-h"> </span><span class="crayon-i">Dec</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">15</span><span class="crayon-o">:</span><span class="crayon-cn">44</span><span class="crayon-h"> </span><span class="crayon-v">source2p7z</span><span class="crayon-sy">.</span><span class="crayon-cn">7z.005</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0007 seconds] -->
</p>
<div></div>
</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">
<hr>
</div>
<h2 ><a name="toc-4"></a><span>导出</span>MySQL数据库测试</h2>
<div>mysqldump -u用户名 -p用户密码 数据库名称 &gt; 保存为文件.sql</div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512649733894_9039"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622ac262995727" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[root@VIRMACH source]# mysqldump -uuser -ppasswd database &gt; backup.sql
[root@VIRMACH source]# ls -lh
-rw-r--r-- 1 root root 882K Dec  7 18:17 bakcup.sql
[root@VIRMACH source]# </textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ac262995727-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ac262995727-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ac262995727-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ac262995727-4">4</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ac262995727-1"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">source</span><span class="crayon-sy">]</span><span class="crayon-p"># mysqldump -uuser -ppasswd database &gt; backup.sql</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ac262995727-2"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">source</span><span class="crayon-sy">]</span><span class="crayon-p"># ls -lh</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ac262995727-3"><span class="crayon-o">-</span><span class="crayon-v">rw</span><span class="crayon-o">-</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-v">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">882K</span><span class="crayon-h"> </span><span class="crayon-i">Dec</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-cn">7</span><span class="crayon-h"> </span><span class="crayon-cn">18</span><span class="crayon-o">:</span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-v">bakcup</span><span class="crayon-sy">.</span><span class="crayon-i">sql</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ac262995727-4"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">VIRMACH </span><span class="crayon-v">source</span><span class="crayon-sy">]</span><span class="crayon-p"># </span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
</p>
<div></div>
</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;"></div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">mutt和7z还有数据库导出测试无误后.即可使用backup2mail脚本</div>
</div>
<div style="margin:0px;">
<hr>
</div>
<div style="margin:0px;"></div>
<div></div>
<div>
<h2 ><a name="toc-5"></a>backup2mail.sh脚本</h2>
<div><span style="font-size: 1.5rem; color: inherit; line-height: 1.6;"><span data-wiz-span="data-wiz-span" style="font-size: 1rem;"><b>本sh脚本特点:</b></span></span></div>
</div>
<div>1、支持分卷压缩，将目标数据分割成指定的<span style="color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;display:inline !important;">附件</span>体积发送到邮箱作为存档备份。</div>
<div>2、可选7z、zip、tar三种压缩方式,默认使用7z.</div>
<div>3、支持文件夹、数据库的备份</div>
<h3 ><a name="toc-6"></a>推荐脚本(<span>7z压缩方式&nbsp;</span>)&nbsp;<span style="font-size: 1.25rem; color: inherit; line-height: 1.6;">backup2mail.sh</span></h3>
<div>
<div class="wiz-code-container" id="wiz_cm_1505672913135_4800" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622ae686945888" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#!/bin/bash

declare -a file         #此条重要勿改.声明file为数组变量
######## 必须修改的变量 ########
mail="xxxxxx@qq.com"        ###自定义.要发往的邮箱
svr_name="[www.luoji.men]"          ###自定义.生成备份文件和邮件的名称
##附件生成目录
dir_back=/home/root/backup2mail/   ###压缩包将保存的位置.一般使用/home/用户名/backup2mail/,或者/root/backup2mail/
##网站目录:
file[0]=/www/wwwroot/wordpress/  ###自定义.需要压缩的目标文件夹 每行可设置一个文件或文件夹 如果数量不够可以自己加
#file[1]=/www/wwwroot/rutorrent/  ###可以添加多个文件夹 格式为 file[N]=路径 其中N请按顺序填写
##网站数据库mysql:
sql_user=用户名         ###自定义.你的mysql用户名 推荐使用root用户，以免出现权限问题
sql_pass=数据库密码        ###自定义.上面用户对应的密码
declare -a data         #声明data为数组变量
data[0]=数据库名称           ###自定义.这里填写要备份的数据库名 依旧一行一个 不够了自己加
#data[1]=mysql_db_2             ###可以添加多个数据库名 格式为 file[N]=路径 其中N请按顺序填写

######## 可不修改的变量 ########
str_time=$(date +"%Y-%m-%d")                                    #日期变量
title="Backup $svr_name $str_time"                              #邮件标题
text="$svr_name Backup File $str_time"                          #邮件内容文本

######## 目录初始化 ########
if [ -d $dir_back ]; then
    rm -rf $dir_back            #如果压缩包保存目录已经存在 则删除目录
fi
mkdir -p $dir_back              #创建压缩包将保存的目录
list=${dir_back}file.lst        #文件列表

######## crontab ####备份的项.导出cromtab计划任务并添加到list列表#### 
tsk_list=${dir_back}crontab-$str_time
crontab -l &gt;&gt; $tsk_list
echo $tsk_list &gt;&gt; $list

######## mysql ####备份的项.导出数据库并将文件路径添加到list列表#### 
for var in ${data[@]}; do
    sql_file=${dir_back}db-$var-$str_time.sql
    mysqldump -u$sql_user -p$sql_pass $var &gt; $sql_file
    echo $sql_file &gt;&gt; $list
done

######## files ####备份的项.文件目录路径添加到list列表#### 
for var in ${file[@]}; do
    echo $var &gt;&gt; $list
done

######## 压缩与分卷 含7z和zip和tar压缩方式 将不用的压缩方式注释 ########
####推荐.使用7z压缩可直接对目标进行分卷
z7z_split=${dir_back}$svr_name-backup-$str_time.split-7z         #变量必须英文开头 因此7z改成z7z
7za -v45m a $z7z_split `cat $list`

####使用zip压缩
#zip_file=${dir_back}$svr_name-backup-$str_time.zip              #zip必须先压缩才能分卷
#zip_split=${dir_back}$svr_name-backup-$str_time.split-zip.zip    #分卷后的压缩包文件名
#zip -r $zip_file `cat $list`                    #压缩目标位置 支持列表方式
#zip -s 45m /$zip_file --out $zip_split         #分卷存在的zip压缩包

####使用tar压缩
#tar_file=${dir_back}$svr_name-backup-$str_time.tar              #tar压缩包名称
#tar_split=${dir_back}$svr_name-backup-$str_time.split-tar.      #tar分卷名称
#tar zcPf $tar_file.gz `cat $list`                               #压缩目标位置 支持列表方式
#split -b 45m -a 3 -d $tar_file.gz $tar_split                    #分卷存在的tar压缩包

####### 发送邮件 ########
for var in ${dir_back}*split*; do           #匹配含有split字符的文件
    echo $var

    arr=(${dir_back}*split*)        #将附件文件名转换成数组 目的是为了获取附件总量 达到在邮件标题显示[1/3][2/3][3/3]标识当前邮件是总分卷邮件中的第几个
    num=${#arr[@]}                      #获取数组的总个数
    echo ${#arr[@]}

    let ++i     #i的值递增1
    echo $i

    echo "$text[$i/${#arr[@]}]"

echo "$text[$i/$num]" | mutt -s "$title[$i/$num]" $mail -a $var         #通过mutt发送附件 每个附件发送一封

    sleep 10s            #循环等待时间 邮件发送太快可能不好 被对方服务器拒收 但我并没有观察到这个显现 只是为了保险
done</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-17">17</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-18">18</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-19">19</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-20">20</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-21">21</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-22">22</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-23">23</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-24">24</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-25">25</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-26">26</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-27">27</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-28">28</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-29">29</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-30">30</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-31">31</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-32">32</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-33">33</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-34">34</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-35">35</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-36">36</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-37">37</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-38">38</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-39">39</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-40">40</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-41">41</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-42">42</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-43">43</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-44">44</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-45">45</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-46">46</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-47">47</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-48">48</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-49">49</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-50">50</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-51">51</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-52">52</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-53">53</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-54">54</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-55">55</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-56">56</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-57">57</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-58">58</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-59">59</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-60">60</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-61">61</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-62">62</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-63">63</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-64">64</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-65">65</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-66">66</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-67">67</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-68">68</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-69">69</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-70">70</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-71">71</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-72">72</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-73">73</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-74">74</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-75">75</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-76">76</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-77">77</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-78">78</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-79">79</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-80">80</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622ae686945888-81">81</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-1"><span class="crayon-p">#!/bin/bash</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-2">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-3"><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-i">file</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#此条重要勿改.声明file为数组变量</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-4"><span class="crayon-p">######## 必须修改的变量 ########</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-5"><span class="crayon-v">mail</span><span class="crayon-o">=</span><span class="crayon-s">"xxxxxx@qq.com"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">###自定义.要发往的邮箱</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-6"><span class="crayon-v">svr_name</span><span class="crayon-o">=</span><span class="crayon-s">"[www.luoji.men]"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">###自定义.生成备份文件和邮件的名称</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-7"><span class="crayon-p">##附件生成目录</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-8"><span class="crayon-v">dir_back</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">home</span><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">backup2mail</span><span class="crayon-o">/</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-p">###压缩包将保存的位置.一般使用/home/用户名/backup2mail/,或者/root/backup2mail/</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-9"><span class="crayon-p">##网站目录:</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-10"><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">www</span><span class="crayon-o">/</span><span class="crayon-v">wwwroot</span><span class="crayon-o">/</span><span class="crayon-v">wordpress</span><span class="crayon-o">/</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-p">###自定义.需要压缩的目标文件夹 每行可设置一个文件或文件夹 如果数量不够可以自己加</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-11"><span class="crayon-p">#file[1]=/www/wwwroot/rutorrent/&nbsp;&nbsp;###可以添加多个文件夹 格式为 file[N]=路径 其中N请按顺序填写</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-12"><span class="crayon-p">##网站数据库mysql:</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-13"><span class="crayon-v">sql_user</span><span class="crayon-o">=</span>用户名<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">###自定义.你的mysql用户名 推荐使用root用户，以免出现权限问题</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-14"><span class="crayon-v">sql_pass</span><span class="crayon-o">=</span>数据库密码<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">###自定义.上面用户对应的密码</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-15"><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-i">data</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#声明data为数组变量</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-16"><span class="crayon-v">data</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">=</span>数据库名称<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">###自定义.这里填写要备份的数据库名 依旧一行一个 不够了自己加</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-17"><span class="crayon-p">#data[1]=mysql_db_2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###可以添加多个数据库名 格式为 file[N]=路径 其中N请按顺序填写</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-18">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-19"><span class="crayon-p">######## 可不修改的变量 ########</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-20"><span class="crayon-v">str_time</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-v">date</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-s">"%Y-%m-%d"</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#日期变量</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-21"><span class="crayon-v">title</span><span class="crayon-o">=</span><span class="crayon-s">"Backup $svr_name $str_time"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#邮件标题</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-22"><span class="crayon-v">text</span><span class="crayon-o">=</span><span class="crayon-s">"$svr_name Backup File $str_time"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#邮件内容文本</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-24"><span class="crayon-p">######## 目录初始化 ########</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-25"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h"> </span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rm</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rf</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果压缩包保存目录已经存在 则删除目录</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-27"><span class="crayon-e">fi</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-28"><span class="crayon-v">mkdir</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#创建压缩包将保存的目录</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-29"><span class="crayon-v">list</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-v">file</span><span class="crayon-sy">.</span><span class="crayon-i">lst</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#文件列表</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-30">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-31"><span class="crayon-p">######## crontab ####备份的项.导出cromtab计划任务并添加到list列表#### </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-32"><span class="crayon-v">tsk_list</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-v">crontab</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-e">str_time</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-33"><span class="crayon-v">crontab</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">l</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">tsk_list</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-34"><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">tsk_list</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-i">list</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-36"><span class="crayon-p">######## mysql ####备份的项.导出数据库并将文件路径添加到list列表#### </span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-37"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">data</span><span class="crayon-sy">[</span><span class="crayon-sy">@</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">sql_file</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-v">db</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-v">str_time</span><span class="crayon-sy">.</span><span class="crayon-e">sql</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-39"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mysqldump</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">u</span><span class="crayon-sy">$</span><span class="crayon-v">sql_user</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">p</span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-sy">_</span>pass<span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">sql_file</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-40"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">sql_file</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">list</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-41"><span class="crayon-i">done</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-42">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-43"><span class="crayon-p">######## files ####备份的项.文件目录路径添加到list列表#### </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-44"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-sy">@</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">list</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-46"><span class="crayon-i">done</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-47">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-48"><span class="crayon-p">######## 压缩与分卷 含7z和zip和tar压缩方式 将不用的压缩方式注释 ########</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-49"><span class="crayon-p">####推荐.使用7z压缩可直接对目标进行分卷</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-50"><span class="crayon-v">z7z_split</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-sy">$</span><span class="crayon-v">svr_name</span><span class="crayon-o">-</span><span class="crayon-v">backup</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-v">str_time</span><span class="crayon-sy">.</span><span class="crayon-v">split</span><span class="crayon-o">-</span><span class="crayon-cn">7z</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#变量必须英文开头 因此7z改成z7z</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-51"><span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">v45m</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">z7z</span><span class="crayon-sy">_</span>split<span class="crayon-h"> </span><span class="crayon-sy">`</span><span class="crayon-i">cat</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">list</span><span class="crayon-sy">`</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-52">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-53"><span class="crayon-p">####使用zip压缩</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-54"><span class="crayon-p">#zip_file=${dir_back}$svr_name-backup-$str_time.zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#zip必须先压缩才能分卷</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-55"><span class="crayon-p">#zip_split=${dir_back}$svr_name-backup-$str_time.split-zip.zip&nbsp;&nbsp;&nbsp;&nbsp;#分卷后的压缩包文件名</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-56"><span class="crayon-p">#zip -r $zip_file `cat $list`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#压缩目标位置 支持列表方式</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-57"><span class="crayon-p">#zip -s 45m /$zip_file --out $zip_split&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #分卷存在的zip压缩包</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-58">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-59"><span class="crayon-p">####使用tar压缩</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-60"><span class="crayon-p">#tar_file=${dir_back}$svr_name-backup-$str_time.tar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#tar压缩包名称</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-61"><span class="crayon-p">#tar_split=${dir_back}$svr_name-backup-$str_time.split-tar.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#tar分卷名称</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-62"><span class="crayon-p">#tar zcPf $tar_file.gz `cat $list`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #压缩目标位置 支持列表方式</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-63"><span class="crayon-p">#split -b 45m -a 3 -d $tar_file.gz $tar_split&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#分卷存在的tar压缩包</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-64">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-65"><span class="crayon-p">####### 发送邮件 ########</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-66"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-o">*</span><span class="crayon-e ">split*</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#匹配含有split字符的文件</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-68">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">arr</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-o">*</span><span class="crayon-e ">split*</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将附件文件名转换成数组 目的是为了获取附件总量 达到在邮件标题显示[1/3][2/3][3/3]标识当前邮件是总分卷邮件中的第几个</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">num</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#arr[@]}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#获取数组的总个数</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#arr[@]}</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-72">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">let</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-i">i</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#i的值递增1</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-i">i</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-75">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"$text[$i/${#arr[@]}]"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-77">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-78"><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"$text[$i/$num]"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"$title[$i/$num]"</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">mail</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#通过mutt发送附件 每个附件发送一封</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-79">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">sleep</span><span class="crayon-h"> </span><span class="crayon-cn">10s</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#循环等待时间 邮件发送太快可能不好 被对方服务器拒收 但我并没有观察到这个显现 只是为了保险</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622ae686945888-81"><span class="crayon-v">done</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0018 seconds] -->
</p>
<div></div>
</div>
</div>
<h2 ><a name="toc-7"></a></h2>
<div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><b>脚本使用测试:</b></div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;font-weight:normal;text-align:start;text-indent:0px;">测试100M的网站文件夹,被压缩成36M附件的邮件发送完毕大约2分钟后qq邮箱可以查到这封新邮件&gt;</div>
<div style="margin:0px;color:rgb(0, 0, 0);font-family:Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;font-size:1rem;font-style:normal;text-align:start;text-indent:0px;"><img src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_de4af56d-458a-49f5-8bc8-b4d661149f6e.jpg"></p>
<div>&nbsp;<img loading="lazy" class="alignnone size-full wp-image-2222" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_6cba7087-7e73-4f3e-9462-b510755b072e.jpg" width="497" height="383" alt="039c280ff790f5ba515130334672ed98_6cba7087-7e73-4f3e-9462-b510755b072e" title="039c280ff790f5ba515130334672ed98_6cba7087-7e73-4f3e-9462-b510755b072e" /><span style="font-weight:normal;font-size:1rem;">&nbsp;</span></p>
<div><b><br /></b></div>
<div><b>文件夹压缩率对比&gt;</b>&nbsp;</div>
</div>
</div>
<p>文件夹体积 107M.</p></div>
<div>7z压缩 36.9M.</div>
<div>宝塔tar.gz压缩 50.44M.</div>
<div>两个压缩包下载后解压对比无异:</div>
<p><img loading="lazy" class="alignnone size-full wp-image-2221" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_625ad534-94fb-415a-b306-dd3dd1da966d.jpg" width="798" height="206" alt="039c280ff790f5ba515130334672ed98_625ad534-94fb-415a-b306-dd3dd1da966d" title="039c280ff790f5ba515130334672ed98_625ad534-94fb-415a-b306-dd3dd1da966d" /><span></span></p>
<div><b style="color: inherit; font-size: 1rem; line-height: 1.6;"><br /></b></div>
<div><b style="color: inherit; font-size: 1rem; line-height: 1.6;">数据库压缩率对比&gt;</b></div>
<div class="wiz-code-container" id="wiz_cm_1512652306609_1065" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622b0535025036" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
1.7M db-www_luoji_men-2017-12-07.sql
233K database7z.7z
331K  sqlbakup.sql.gz</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b0535025036-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b0535025036-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b0535025036-3">3</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b0535025036-1"><span class="crayon-cn">1.7M</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-o">-</span><span class="crayon-v">www_luoji_men</span><span class="crayon-o">-</span><span class="crayon-cn">2017</span><span class="crayon-o">-</span><span class="crayon-cn">12</span><span class="crayon-o">-</span><span class="crayon-cn">07.sql</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b0535025036-2"><span class="crayon-cn">233K</span><span class="crayon-h"> </span><span class="crayon-v">database7z</span><span class="crayon-sy">.</span><span class="crayon-cn">7z</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b0535025036-3"><span class="crayon-cn">331K</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">sqlbakup</span><span class="crayon-sy">.</span><span class="crayon-v">sql</span><span class="crayon-sy">.</span><span class="crayon-v">gz</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div>不压缩导出数据库1.7M</div>
<div>7z压缩以上文件后:233K</div>
<div>使用gz压缩方式导出数据库331K</div>
<div>结论:还是7z优秀.</div>
<div></div>
<div></div>
<h3>
<hr>
<p>脚本二(zip压缩方式)</h3>
<div><span>分卷</span>压缩、通过mutt发送邮件</div>
<div>文件+数据库+计划任务版本</div>
<div>脚本维护时间&gt;2017年9月17日20:00</div>
<div class="wiz-code-container" id="wiz_cm_1505649606548_9097" data-mode="Shell" data-theme="default"></p><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622b2836021482" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#!/bin/bash
######## 需要自定义修改的变量 ########
svr_name="[luoji.men]"          ###修改备份的名称
dir_back=/root/mail-test/backup/   ###修改压缩包保存位置
mail="xxxxx@qq.com"        ###修改要发往的邮箱

declare -a file                 #声明file为数组变量
file[0]=/root/mail-test/file/   ###修改需要压缩的目标文件夹 每行可设置一个文件或文件夹 如果数量不够可以自己加
file[1]=/root/mail-test/file2/  ###可以添加多个文件夹 格式为 file[N]=路径 其中N请按顺序填写

sql_user=数据库用户名          ###修改你的mysql用户名 推荐使用root用户，以免出现权限问题
sql_pass=数据库密码        ###修改上面的用户对应的密码
declare -a data                 #声明data为数组变量
data[0]=数据库名           ###修改这里填写要备份的数据库名 依旧一行一个 不够了自己加
#data[1]=mysql_db_2             ###可以添加多个文件夹 格式为 file[N]=路径 其中N请按顺序填写

######## 不需要修改的变量 ########
str_time=$(date +"%Y-%m-%d")                                    #日期变量
zip_file=${dir_back}$svr_name-backup-$str_time.zip              #压缩包文件名
zip_split=${dir_back}$svr_name-backup-$str_time.zipsplit.zip    #分卷后的压缩包文件名
title="Backup File $str_time $svr_name"                         #邮件标题
text="$svr_name Backup File $str_time"                          #邮件内容文本

######## 目录初始化 ########
if [ -d $dir_back ]; then
    rm -rf $dir_back            #如果压缩包保存目录已经存在 则删除目录
fi
mkdir -p $dir_back              #创建压缩包保存目录
list=${dir_back}file.lst        #文件列表

######## crontab ####计划任务备份#### 
tsk_list=${dir_back}crontab-$str_time
crontab -l &gt;&gt; $tsk_list
echo $tsk_list &gt;&gt; $list

######## mysql ####数据库备份#### 
for var in ${data[@]}; do
    sql_file=${dir_back}db-$var-$str_time.sql
    mysqldump -u$sql_user -p$sql_pass $var &gt; $sql_file
    echo $sql_file &gt;&gt; $list
done

######## files ####文件备份#### 
for var in ${file[@]}; do
    echo $var &gt;&gt; $list
done

######## 压缩与分卷 ########
zip -r $zip_file `cat $list`                    #压缩目标位置 支持列表方式
zip -s 300k /$zip_file --out $zip_split         #分卷存在的压缩包

####### 发送邮件 ########
for var in ${dir_back}*zipsplit.*; do           #匹配含有zipsplit字符的文件
    echo $var

    arr=(${dir_back}*zipsplit.*)        #将附件文件名转换成数组 目的是为了获取附件总量 达到在邮件标题显示[1/3][2/3][3/3]是总分卷附件中的第几个
    num=${#arr[@]}                      #获取数组的总个数
    echo ${#arr[@]}

    let ++i     #i的值递增1
    echo $i

    echo "$text[$i/${#arr[@]}]"

echo "$text[$i/$num]" | mutt -s "$title[$i/$num]" $mail -a $var         #通过mutt发送附件 每个附件发送一封

    sleep 3s            #循环等待时间 邮件发送太快可能不好 被对方服务器拒收 但我并没有观察到这个显现 只是为了保险
done</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-17">17</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-18">18</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-19">19</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-20">20</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-21">21</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-22">22</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-23">23</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-24">24</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-25">25</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-26">26</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-27">27</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-28">28</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-29">29</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-30">30</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-31">31</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-32">32</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-33">33</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-34">34</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-35">35</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-36">36</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-37">37</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-38">38</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-39">39</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-40">40</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-41">41</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-42">42</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-43">43</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-44">44</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-45">45</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-46">46</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-47">47</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-48">48</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-49">49</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-50">50</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-51">51</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-52">52</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-53">53</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-54">54</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-55">55</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-56">56</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-57">57</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-58">58</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-59">59</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-60">60</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-61">61</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-62">62</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-63">63</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-64">64</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-65">65</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-66">66</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-67">67</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b2836021482-68">68</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-1"><span class="crayon-p">#!/bin/bash</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-2"><span class="crayon-p">######## 需要自定义修改的变量 ########</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-3"><span class="crayon-v">svr_name</span><span class="crayon-o">=</span><span class="crayon-s">"[luoji.men]"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">###修改备份的名称</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-4"><span class="crayon-v">dir_back</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">mail</span><span class="crayon-o">-</span><span class="crayon-v">test</span><span class="crayon-o">/</span><span class="crayon-v">backup</span><span class="crayon-o">/</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-p">###修改压缩包保存位置</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-5"><span class="crayon-v">mail</span><span class="crayon-o">=</span><span class="crayon-s">"xxxxx@qq.com"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">###修改要发往的邮箱</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-6">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-7"><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-i">file</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#声明file为数组变量</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-8"><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">mail</span><span class="crayon-o">-</span><span class="crayon-v">test</span><span class="crayon-o">/</span><span class="crayon-v">file</span><span class="crayon-o">/</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-p">###修改需要压缩的目标文件夹 每行可设置一个文件或文件夹 如果数量不够可以自己加</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-9"><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">mail</span><span class="crayon-o">-</span><span class="crayon-v">test</span><span class="crayon-o">/</span><span class="crayon-v">file2</span><span class="crayon-o">/</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-p">###可以添加多个文件夹 格式为 file[N]=路径 其中N请按顺序填写</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-10">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-11"><span class="crayon-v">sql_user</span><span class="crayon-o">=</span>数据库用户名<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">###修改你的mysql用户名 推荐使用root用户，以免出现权限问题</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-12"><span class="crayon-v">sql_pass</span><span class="crayon-o">=</span>数据库密码<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">###修改上面的用户对应的密码</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-13"><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-i">data</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#声明data为数组变量</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-14"><span class="crayon-v">data</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">=</span>数据库名<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">###修改这里填写要备份的数据库名 依旧一行一个 不够了自己加</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-15"><span class="crayon-p">#data[1]=mysql_db_2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###可以添加多个文件夹 格式为 file[N]=路径 其中N请按顺序填写</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-16">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-17"><span class="crayon-p">######## 不需要修改的变量 ########</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-18"><span class="crayon-v">str_time</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-v">date</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-s">"%Y-%m-%d"</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#日期变量</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-19"><span class="crayon-v">zip_file</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-sy">$</span><span class="crayon-v">svr_name</span><span class="crayon-o">-</span><span class="crayon-v">backup</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-v">str_time</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#压缩包文件名</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-20"><span class="crayon-v">zip_split</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-sy">$</span><span class="crayon-v">svr_name</span><span class="crayon-o">-</span><span class="crayon-v">backup</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-v">str_time</span><span class="crayon-sy">.</span><span class="crayon-v">zipsplit</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#分卷后的压缩包文件名</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-21"><span class="crayon-v">title</span><span class="crayon-o">=</span><span class="crayon-s">"Backup File $str_time $svr_name"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#邮件标题</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-22"><span class="crayon-v">text</span><span class="crayon-o">=</span><span class="crayon-s">"$svr_name Backup File $str_time"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#邮件内容文本</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-24"><span class="crayon-p">######## 目录初始化 ########</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-25"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h"> </span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rm</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rf</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果压缩包保存目录已经存在 则删除目录</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-27"><span class="crayon-e">fi</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-28"><span class="crayon-v">mkdir</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#创建压缩包保存目录</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-29"><span class="crayon-v">list</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-v">file</span><span class="crayon-sy">.</span><span class="crayon-i">lst</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#文件列表</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-30">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-31"><span class="crayon-p">######## crontab ####计划任务备份#### </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-32"><span class="crayon-v">tsk_list</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-e">crontab</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-e">str_time</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-33"><span class="crayon-e">crontab</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">l</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">tsk_list</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-34"><span class="crayon-e">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">tsk_list</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">list</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-36"><span class="crayon-p">######## mysql ####数据库备份#### </span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-37"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">data</span><span class="crayon-sy">[</span><span class="crayon-sy">@</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">sql_file</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-v">db</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-v">str_time</span><span class="crayon-sy">.</span><span class="crayon-e">sql</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-39"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mysqldump</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">u</span><span class="crayon-sy">$</span><span class="crayon-e">sql_user</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">p</span><span class="crayon-sy">$</span><span class="crayon-e">sql_pass</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">sql_file</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">sql_file</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">list</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-41"><span class="crayon-e">done</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-42">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-43"><span class="crayon-p">######## files ####文件备份#### </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-44"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-sy">@</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">list</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-46"><span class="crayon-e">done</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-47">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-48"><span class="crayon-p">######## 压缩与分卷 ########</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-49"><span class="crayon-e">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">r</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">zip_file</span><span class="crayon-h"> </span><span class="crayon-sy">`</span><span class="crayon-e">cat</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">list</span><span class="crayon-sy">`</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#压缩目标位置 支持列表方式</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-50"><span class="crayon-e">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">s</span><span class="crayon-h"> </span><span class="crayon-cn">300k</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-sy">$</span><span class="crayon-e">zip_file</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">out</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">zip_split</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#分卷存在的压缩包</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-51">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-52"><span class="crayon-p">####### 发送邮件 ########</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-53"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-o">*</span><span class="crayon-v">zipsplit</span><span class="crayon-sy">.</span><span class="crayon-o">*</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#匹配含有zipsplit字符的文件</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-55">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">arr</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-o">*</span><span class="crayon-v">zipsplit</span><span class="crayon-sy">.</span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将附件文件名转换成数组 目的是为了获取附件总量 达到在邮件标题显示[1/3][2/3][3/3]是总分卷附件中的第几个</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">num</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#arr[@]}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#获取数组的总个数</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#arr[@]}</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-59">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">let</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-i">i</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#i的值递增1</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-i">i</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-62">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"$text[$i/${#arr[@]}]"</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-64">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-65"><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"$text[$i/$num]"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"$title[$i/$num]"</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">mail</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-p">#通过mutt发送附件 每个附件发送一封</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-66">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">sleep</span><span class="crayon-h"> </span><span class="crayon-cn">3s</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#循环等待时间 邮件发送太快可能不好 被对方服务器拒收 但我并没有观察到这个显现 只是为了保险</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b2836021482-68"><span class="crayon-v">done</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0018 seconds] -->
<p></p>
<div></div>
</div>
<div><span style="text-align: start; text-indent: 0px; display: inline !important;"><br /></span></div>
<h3 ><a name="toc-8"></a>脚本三(zip压缩方式.不含数据库)&nbsp;</h3>
<div>脚本维护时间&gt;2017年9月16日21:55:43</div>
<div class="wiz-code-container" id="wiz_cm_1505570149225_4129" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622b4898969460" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
[root@vultr mail-test]# cat zipmail.sh
#!/bin/bash
# This script run at 02:00 every Tuesday

svr_name="[luoji.men]" #备份的名称
dir_back=/root/mail-test/zip/ #压缩包保存位置
mail="xxxxx@qq.com" #要发往的邮箱

declare -a file #声明file为数组变量
file[0]=/root/mail-test/file/ #需要压缩的目标文件夹 每行可设置一个文件或文件夹 如果数量不够可以自己加
file[1]=/root/mail-test/file2/ #可以添加多个文件夹 格式为 file[N]=路径 其中N请按顺序填写

###########################

str_time=$(date +"%Y-%m-%d") #日期变量
zip_file=${dir_back}$svr_name-backup-$str_time.zip #压缩包文件名
zip_split=${dir_back}$svr_name-backup-$str_time.zipsplit.zip #分卷后的压缩包文件名
title="Backup File $str_time $svr_name" #邮件标题
text="$svr_name Backup File $str_time" #邮件内容文本

####################################

if [ -d $dir_back ]; then
    rm -rf $dir_back #如果压缩包保存目录已经存在 则删除目录
fi

mkdir -p $dir_back #创建压缩包保存目录

list=${dir_back}file.lst #文件列表

# files
for var in ${file[@]}; do
    echo $var &gt;&gt; $list
done

zip -r $zip_file `cat $list`  #压缩目标位置 支持列表方式
zip -s 100k /$zip_file --out $zip_split #分卷压缩包

#######
for var in ${dir_back}*zipsplit.*; do #匹配含有zipsplit字符的文件
    echo $var

    arr=(${dir_back}*zipsplit.*) #将附件文件名转换成数组 目的是为了获取附件总量 达到在邮件标题显示[1/3][2/3][3/3]是总分卷附件中的第几个
    num=${#arr[@]} #获取数组的总个数
    echo ${#arr[@]}

    let ++i #i的值递增1
    echo $i

    echo "$text[$i/${#arr[@]}]"

echo "$text[$i/$num]" | mutt -s "$title[$i/$num]" $mail -a $var #通过mutt发送附件 每个附件发送一封

    sleep 3s #循环等待时间 邮件发送太快可能不好 被对方服务器拒收 但我并没有观察到这个显现 只是为了保险
done</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-17">17</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-18">18</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-19">19</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-20">20</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-21">21</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-22">22</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-23">23</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-24">24</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-25">25</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-26">26</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-27">27</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-28">28</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-29">29</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-30">30</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-31">31</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-32">32</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-33">33</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-34">34</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-35">35</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-36">36</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-37">37</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-38">38</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-39">39</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-40">40</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-41">41</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-42">42</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-43">43</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-44">44</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-45">45</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-46">46</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-47">47</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-48">48</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-49">49</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-50">50</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-51">51</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-52">52</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-53">53</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-54">54</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b4898969460-55">55</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-1"><span class="crayon-sy">[</span><span class="crayon-v">root</span><span class="crayon-sy">@</span><span class="crayon-e">vultr </span><span class="crayon-v">mail</span><span class="crayon-o">-</span><span class="crayon-v">test</span><span class="crayon-sy">]</span><span class="crayon-p"># cat zipmail.sh</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-2"><span class="crayon-p">#!/bin/bash</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-3"><span class="crayon-p"># This script run at 02:00 every Tuesday</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-4">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-5"><span class="crayon-v">svr_name</span><span class="crayon-o">=</span><span class="crayon-s">"[luoji.men]"</span><span class="crayon-h"> </span><span class="crayon-p">#备份的名称</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-6"><span class="crayon-v">dir_back</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">mail</span><span class="crayon-o">-</span><span class="crayon-v">test</span><span class="crayon-o">/</span><span class="crayon-v">zip</span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-p">#压缩包保存位置</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-7"><span class="crayon-v">mail</span><span class="crayon-o">=</span><span class="crayon-s">"xxxxx@qq.com"</span><span class="crayon-h"> </span><span class="crayon-p">#要发往的邮箱</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-8">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-9"><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-i">file</span><span class="crayon-h"> </span><span class="crayon-p">#声明file为数组变量</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-10"><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">mail</span><span class="crayon-o">-</span><span class="crayon-v">test</span><span class="crayon-o">/</span><span class="crayon-v">file</span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-p">#需要压缩的目标文件夹 每行可设置一个文件或文件夹 如果数量不够可以自己加</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-11"><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">root</span><span class="crayon-o">/</span><span class="crayon-v">mail</span><span class="crayon-o">-</span><span class="crayon-v">test</span><span class="crayon-o">/</span><span class="crayon-v">file2</span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-p">#可以添加多个文件夹 格式为 file[N]=路径 其中N请按顺序填写</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-12">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-13"><span class="crayon-p">###########################</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-14">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-15"><span class="crayon-v">str_time</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-v">date</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-s">"%Y-%m-%d"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p">#日期变量</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-16"><span class="crayon-v">zip_file</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-sy">$</span><span class="crayon-v">svr_name</span><span class="crayon-o">-</span><span class="crayon-v">backup</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-v">str_time</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span><span class="crayon-h"> </span><span class="crayon-p">#压缩包文件名</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-17"><span class="crayon-v">zip_split</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-sy">$</span><span class="crayon-v">svr_name</span><span class="crayon-o">-</span><span class="crayon-v">backup</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-v">str_time</span><span class="crayon-sy">.</span><span class="crayon-v">zipsplit</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span><span class="crayon-h"> </span><span class="crayon-p">#分卷后的压缩包文件名</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-18"><span class="crayon-v">title</span><span class="crayon-o">=</span><span class="crayon-s">"Backup File $str_time $svr_name"</span><span class="crayon-h"> </span><span class="crayon-p">#邮件标题</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-19"><span class="crayon-v">text</span><span class="crayon-o">=</span><span class="crayon-s">"$svr_name Backup File $str_time"</span><span class="crayon-h"> </span><span class="crayon-p">#邮件内容文本</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-20">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-21"><span class="crayon-p">####################################</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-22">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-23"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h"> </span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rm</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rf</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h"> </span><span class="crayon-p">#如果压缩包保存目录已经存在 则删除目录</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-25"><span class="crayon-e">fi</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-26">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-27"><span class="crayon-v">mkdir</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h"> </span><span class="crayon-p">#创建压缩包保存目录</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-28">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-29"><span class="crayon-v">list</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-v">file</span><span class="crayon-sy">.</span><span class="crayon-i">lst</span><span class="crayon-h"> </span><span class="crayon-p">#文件列表</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-30">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-31"><span class="crayon-p"># files</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-32"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-sy">@</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">list</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-34"><span class="crayon-e">done</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-35">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-36"><span class="crayon-e">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">r</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">zip_file</span><span class="crayon-h"> </span><span class="crayon-sy">`</span><span class="crayon-e">cat</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">list</span><span class="crayon-sy">`</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-p">#压缩目标位置 支持列表方式</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-37"><span class="crayon-e">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">s</span><span class="crayon-h"> </span><span class="crayon-cn">100k</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-sy">$</span><span class="crayon-e">zip_file</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">out</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">zip_split</span><span class="crayon-h"> </span><span class="crayon-p">#分卷压缩包</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-38">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-39"><span class="crayon-p">#######</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-40"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-o">*</span><span class="crayon-v">zipsplit</span><span class="crayon-sy">.</span><span class="crayon-o">*</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span><span class="crayon-h"> </span><span class="crayon-p">#匹配含有zipsplit字符的文件</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-42">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">arr</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-o">*</span><span class="crayon-v">zipsplit</span><span class="crayon-sy">.</span><span class="crayon-o">*</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p">#将附件文件名转换成数组 目的是为了获取附件总量 达到在邮件标题显示[1/3][2/3][3/3]是总分卷附件中的第几个</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">num</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#arr[@]} #获取数组的总个数</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#arr[@]}</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-46">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">let</span><span class="crayon-h"> </span><span class="crayon-o">++</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-p">#i的值递增1</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-i">i</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-49">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"$text[$i/${#arr[@]}]"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-51">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-52"><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"$text[$i/$num]"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"$title[$i/$num]"</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">mail</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-p">#通过mutt发送附件 每个附件发送一封</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-53">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">sleep</span><span class="crayon-h"> </span><span class="crayon-cn">3s</span><span class="crayon-h"> </span><span class="crayon-p">#循环等待时间 邮件发送太快可能不好 被对方服务器拒收 但我并没有观察到这个显现 只是为了保险</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b4898969460-55"><span class="crayon-v">done</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
</p>
<div></div>
</div>
<div></div>
<div>
<h3 ><a name="toc-9"></a>脚本四(tar压缩方式.不含数据库)</h3>
<div>/bin/bash /your-script-path/backup.sh</div>
<div></div>
<div class="wiz-code-container" data-mode="Shell" data-theme="default" id="wiz_cm_1512589254057_5683"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622b6364945748" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#!/bin/bash

str_time=$(date +"%Y-%m-%d")
dir_back=/home/backup/
tar_file=${dir_back}backup-$str_time.tar

mail="xxxx@qq.com" #在这里设定收件人地址
title="Backup File $str_time luoji.men"
text="luoji.men Backup File $str_time" #这里可以设置邮件的标题 最后的$str_time不要动

declare -a file
file[0]=/www/backup/luoji_men #在这里设置需要备份的内容  每行可设置一个文件或文件夹 如果数量不够可以自己加
#file[1]=/other-file          #格式为   file[N]=路径    其中 N请按顺序填写
####################################

if [ -d $dir_back ]; then
    rm -rf $dir_back
fi

mkdir -p $dir_back

list=${dir_back}file.lst

# files
for var in ${file[@]}; do
    echo $var &gt;&gt; $list
done

tar zcPf $tar_file.gz `cat $list`

split -b 20m -a 3 -d $tar_file.gz ${dir_back}backup-$str_time.part.
#cat ${dir_back}backup-* &gt; ${dir_back}backup.tar.gz

for var in ${dir_back}*.part.*; do
    echo "$text" | mutt -s "$title" $mail -a $var #var为附件
    sleep 30s
done</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-17">17</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-18">18</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-19">19</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-20">20</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-21">21</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-22">22</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-23">23</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-24">24</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-25">25</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-26">26</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-27">27</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-28">28</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-29">29</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-30">30</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-31">31</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-32">32</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-33">33</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-34">34</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-35">35</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-36">36</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b6364945748-37">37</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-1"><span class="crayon-p">#!/bin/bash</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-2">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-3"><span class="crayon-v">str_time</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-v">date</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-s">"%Y-%m-%d"</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-4"><span class="crayon-v">dir_back</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">home</span><span class="crayon-o">/</span><span class="crayon-v">backup</span><span class="crayon-o">/</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-5"><span class="crayon-v">tar_file</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-v">backup</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-v">str_time</span><span class="crayon-sy">.</span><span class="crayon-e">tar</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-6">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-7"><span class="crayon-v">mail</span><span class="crayon-o">=</span><span class="crayon-s">"xxxx@qq.com"</span><span class="crayon-h"> </span><span class="crayon-p">#在这里设定收件人地址</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-8"><span class="crayon-v">title</span><span class="crayon-o">=</span><span class="crayon-s">"Backup File $str_time luoji.men"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-9"><span class="crayon-v">text</span><span class="crayon-o">=</span><span class="crayon-s">"luoji.men Backup File $str_time"</span><span class="crayon-h"> </span><span class="crayon-p">#这里可以设置邮件的标题 最后的$str_time不要动</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-10">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-11"><span class="crayon-r">declare</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">file</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-12"><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">www</span><span class="crayon-o">/</span><span class="crayon-v">backup</span><span class="crayon-o">/</span><span class="crayon-v">luoji</span><span class="crayon-sy">_</span>men<span class="crayon-h"> </span><span class="crayon-p">#在这里设置需要备份的内容&nbsp;&nbsp;每行可设置一个文件或文件夹 如果数量不够可以自己加</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-13"><span class="crayon-p">#file[1]=/other-file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#格式为&nbsp;&nbsp; file[N]=路径&nbsp;&nbsp;&nbsp;&nbsp;其中 N请按顺序填写</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-14"><span class="crayon-p">####################################</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-16"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">dir</span><span class="crayon-sy">_</span>back<span class="crayon-h"> </span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">rm</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rf</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">dir_back</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-18"><span class="crayon-e">fi</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-20"><span class="crayon-v">mkdir</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">dir_back</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-22"><span class="crayon-v">list</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-v">file</span><span class="crayon-sy">.</span><span class="crayon-i">lst</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-24"><span class="crayon-p"># files</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-25"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">file</span><span class="crayon-sy">[</span><span class="crayon-sy">@</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-e">list</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-27"><span class="crayon-e">done</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-28">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-29"><span class="crayon-e">tar </span><span class="crayon-i">zcPf</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">tar_file</span><span class="crayon-sy">.</span><span class="crayon-i">gz</span><span class="crayon-h"> </span><span class="crayon-sy">`</span><span class="crayon-i">cat</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">list</span><span class="crayon-sy">`</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-30">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-31"><span class="crayon-v">split</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">b</span><span class="crayon-h"> </span><span class="crayon-cn">20m</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">tar_file</span><span class="crayon-sy">.</span><span class="crayon-i">gz</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-v">backup</span><span class="crayon-o">-</span><span class="crayon-sy">$</span><span class="crayon-v">str_time</span><span class="crayon-sy">.</span><span class="crayon-v">part</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-32"><span class="crayon-p">#cat ${dir_back}backup-* &gt; ${dir_back}backup.tar.gz</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-33">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-34"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">dir_back</span><span class="crayon-sy">}</span><span class="crayon-o">*</span><span class="crayon-sy">.</span><span class="crayon-v">part</span><span class="crayon-sy">.</span><span class="crayon-o">*</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-st">do</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"$text"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"$title"</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">mail</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-t">var</span><span class="crayon-h"> </span><span class="crayon-p">#var为附件</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">sleep</span><span class="crayon-h"> </span><span class="crayon-cn">30s</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b6364945748-37"><span class="crayon-v">done</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
</p>
<div></div>
</div>
<div></div>
<p></div>
<div></div>
<div>
<hr>
</div>
<h2 ><a name="toc-10"></a></h2>
<div>
<div style="margin: 0px; color: rgb(0, 0, 0); font-family: Helvetica, 'Hiragino Sans GB', 微软雅黑, 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif; font-size: 1rem; font-style: normal; text-align: start; text-indent: 0px;"></div>
</div>
<h2 ><a name="toc-11"></a>参考文献</h2>
<h3 ><a name="toc-12"></a>mysql备份与还原&nbsp;</h3>
<div>http://www.cnblogs.com/Cherie/p/3309456.html</div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505644523183_6193" data-mode="Shell" data-theme="default"></p><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622b8320703094" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
一、备份常用操作基本命令
1、备份命令mysqldump格式
    格式：mysqldump -h主机名  -P端口 -u用户名 -p密码 –database 数据库名 &gt; 文件名.sql 
2、备份MySQL数据库为带删除表的格式
    备份MySQL数据库为带删除表的格式，能够让该备份覆盖已有数据库而不需要手动删除原有数据库。
    mysqldump  --add-drop-table -uusername -ppassword -database databasename &gt; backupfile.sql
3、直接将MySQL数据库压缩备份
    mysqldump -hhostname -uusername -ppassword -database databasename | gzip &gt; backupfile.sql.gz

二、增量备份
小量的数据库可以每天进行完整备份，因为这也用不了多少时间，但当数据库很大时，就不太可能每天进行一次完整备份了，这时候就可以使用增量备份。增量备份的原理就是使用了mysql的binlog志。
1、首先做一次完整备份：
    mysqldump -h10.6.208.183 -utest2 -p123  -P3310 --single-transaction  --master-data=2  test&gt;test.sql这时候就会得到一个全备文件test.sql
在sql文件中我们会看到：
    -- CHANGE MASTER TO MASTER_LOG_FILE='bin-log.000002', MASTER_LOG_POS=107;是指备份后所有的更改将会保存到bin-log.000002二进制文件中。
2、在test库的t_student表中增加两条记录，然后执行flush logs命令。这时将会产生一个新的二进制日志文件bin-log.000003，bin-log.000002则保存了全备过后的所有更改，既增加记录的操作也保存在了bin-log.00002中。
3、再在test库中的a表中增加两条记录，然后误删除t_student表和a表。a中增加记录的操作和删除表a和t_student的操作都记录在bin-log.000003中。

三、恢复
1、首先导入全备数据
    mysql -h10.6.208.183 -utest2 -p123  -P3310 &lt; test.sql，也可以直接在mysql命令行下面用source导入
2、恢复bin-log.000002
    mysqlbinlog bin-log.000002 |mysql -h10.6.208.183 -utest2 -p123  -P3310  
3、恢复部分 bin-log.000003
    在general_log中找到误删除的时间点，然后更加对应的时间点到bin-log.000003中找到相应的position点，需要恢复到误删除的前面一个position点。
可以用如下参数来控制binlog的区间
    --start-position 开始点 --stop-position 结束点
    --start-date 开始时间  --stop-date  结束时间
找到恢复点后，既可以开始恢复。
    mysqlbinlog mysql-bin.000003 --stop-position=208 |mysql -h10.6.208.183 -utest2 -p123  -P3310 </textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-17">17</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-18">18</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-19">19</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-20">20</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-21">21</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-22">22</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-23">23</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-24">24</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-25">25</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-26">26</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-27">27</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-28">28</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-29">29</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b8320703094-30">30</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-1">一、备份常用操作基本命令</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-2"><span class="crayon-cn">1</span>、备份命令<span class="crayon-i">mysqldump</span>格式</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>格式：<span class="crayon-v">mysqldump</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">h</span>主机名<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">-</span><span class="crayon-i">P</span>端口<span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">u</span>用户名<span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">p</span>密码<span class="crayon-h"> </span>–<span class="crayon-i">database</span><span class="crayon-h"> </span>数据库名<span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span>文件名<span class="crayon-sy">.</span><span class="crayon-i">sql</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-4"><span class="crayon-cn">2</span>、备份<span class="crayon-i">MySQL</span>数据库为带删除表的格式</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>备份<span class="crayon-i">MySQL</span>数据库为带删除表的格式，能够让该备份覆盖已有数据库而不需要手动删除原有数据库。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mysqldump</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-v">add</span><span class="crayon-o">-</span><span class="crayon-v">drop</span><span class="crayon-o">-</span><span class="crayon-v">table</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">uusername</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">ppassword</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">database </span><span class="crayon-v">databasename</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">backupfile</span><span class="crayon-sy">.</span><span class="crayon-i">sql</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-7"><span class="crayon-cn">3</span>、直接将<span class="crayon-i">MySQL</span>数据库压缩备份</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mysqldump</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">hhostname</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">uusername</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">ppassword</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">database </span><span class="crayon-v">databasename</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">gzip</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">backupfile</span><span class="crayon-sy">.</span><span class="crayon-v">sql</span><span class="crayon-sy">.</span><span class="crayon-i">gz</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-10">二、增量备份</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-11">小量的数据库可以每天进行完整备份，因为这也用不了多少时间，但当数据库很大时，就不太可能每天进行一次完整备份了，这时候就可以使用增量备份。增量备份的原理就是使用了<span class="crayon-i">mysql</span>的<span class="crayon-i">binlog</span>志。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-12"><span class="crayon-cn">1</span>、首先做一次完整备份：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mysqldump</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">h10</span><span class="crayon-sy">.</span><span class="crayon-cn">6.208.183</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">utest2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">p123</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">-</span><span class="crayon-v">P3310</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">single</span><span class="crayon-o">-</span><span class="crayon-v">transaction</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-v">master</span><span class="crayon-o">-</span><span class="crayon-v">data</span><span class="crayon-o">=</span><span class="crayon-cn">2</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">test</span><span class="crayon-o">&gt;</span><span class="crayon-v">test</span><span class="crayon-sy">.</span><span class="crayon-i">sql</span>这时候就会得到一个全备文件<span class="crayon-v">test</span><span class="crayon-sy">.</span><span class="crayon-i">sql</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-14">在<span class="crayon-i">sql</span>文件中我们会看到：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-e">CHANGE </span><span class="crayon-e">MASTER </span><span class="crayon-st">TO</span><span class="crayon-h"> </span><span class="crayon-v">MASTER_LOG_FILE</span><span class="crayon-o">=</span><span class="crayon-s">'bin-log.000002'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">MASTER_LOG_POS</span><span class="crayon-o">=</span><span class="crayon-cn">107</span><span class="crayon-sy">;</span>是指备份后所有的更改将会保存到<span class="crayon-v">bin</span><span class="crayon-o">-</span><span class="crayon-v">log</span><span class="crayon-sy">.</span><span class="crayon-cn">000002</span>二进制文件中。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-16"><span class="crayon-cn">2</span>、在<span class="crayon-i">test</span>库的<span class="crayon-v">t</span><span class="crayon-sy">_</span>student表中增加两条记录，然后执行<span class="crayon-e">flush </span><span class="crayon-i">logs</span>命令。这时将会产生一个新的二进制日志文件<span class="crayon-v">bin</span><span class="crayon-o">-</span><span class="crayon-v">log</span><span class="crayon-sy">.</span><span class="crayon-cn">000003</span>，<span class="crayon-v">bin</span><span class="crayon-o">-</span><span class="crayon-v">log</span><span class="crayon-sy">.</span><span class="crayon-cn">000002</span>则保存了全备过后的所有更改，既增加记录的操作也保存在了<span class="crayon-v">bin</span><span class="crayon-o">-</span><span class="crayon-v">log</span><span class="crayon-sy">.</span><span class="crayon-cn">00002</span>中。</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-17"><span class="crayon-cn">3</span>、再在<span class="crayon-i">test</span>库中的<span class="crayon-i">a</span>表中增加两条记录，然后误删除<span class="crayon-v">t</span><span class="crayon-sy">_</span>student表和<span class="crayon-i">a</span>表。<span class="crayon-i">a</span>中增加记录的操作和删除表<span class="crayon-i">a</span>和<span class="crayon-v">t</span><span class="crayon-sy">_</span>student的操作都记录在<span class="crayon-v">bin</span><span class="crayon-o">-</span><span class="crayon-v">log</span><span class="crayon-sy">.</span><span class="crayon-cn">000003</span>中。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-18">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-19">三、恢复</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-20"><span class="crayon-cn">1</span>、首先导入全备数据</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mysql</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">h10</span><span class="crayon-sy">.</span><span class="crayon-cn">6.208.183</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">utest2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">p123</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">-</span><span class="crayon-v">P3310</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">test</span><span class="crayon-sy">.</span><span class="crayon-i">sql</span>，也可以直接在<span class="crayon-i">mysql</span>命令行下面用<span class="crayon-i">source</span>导入</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-22"><span class="crayon-cn">2</span>、恢复<span class="crayon-v">bin</span><span class="crayon-o">-</span><span class="crayon-v">log</span><span class="crayon-sy">.</span><span class="crayon-cn">000002</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mysqlbinlog </span><span class="crayon-v">bin</span><span class="crayon-o">-</span><span class="crayon-v">log</span><span class="crayon-sy">.</span><span class="crayon-cn">000002</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-v">mysql</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">h10</span><span class="crayon-sy">.</span><span class="crayon-cn">6.208.183</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">utest2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">p123</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">-</span><span class="crayon-i">P3310</span><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-24"><span class="crayon-cn">3</span>、恢复部分<span class="crayon-h"> </span><span class="crayon-v">bin</span><span class="crayon-o">-</span><span class="crayon-v">log</span><span class="crayon-sy">.</span><span class="crayon-cn">000003</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>在<span class="crayon-v">general</span><span class="crayon-sy">_</span>log中找到误删除的时间点，然后更加对应的时间点到<span class="crayon-v">bin</span><span class="crayon-o">-</span><span class="crayon-v">log</span><span class="crayon-sy">.</span><span class="crayon-cn">000003</span>中找到相应的<span class="crayon-i">position</span>点，需要恢复到误删除的前面一个<span class="crayon-i">position</span>点。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-26">可以用如下参数来控制<span class="crayon-i">binlog</span>的区间</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-v">start</span><span class="crayon-o">-</span><span class="crayon-i">position</span><span class="crayon-h"> </span>开始点<span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">stop</span><span class="crayon-o">-</span><span class="crayon-i">position</span><span class="crayon-h"> </span>结束点</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-v">start</span><span class="crayon-o">-</span><span class="crayon-i">date</span><span class="crayon-h"> </span>开始时间<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">--</span><span class="crayon-v">stop</span><span class="crayon-o">-</span><span class="crayon-i">date</span><span class="crayon-h">&nbsp;&nbsp;</span>结束时间</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-29">找到恢复点后，既可以开始恢复。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b8320703094-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">mysqlbinlog </span><span class="crayon-v">mysql</span><span class="crayon-o">-</span><span class="crayon-v">bin</span><span class="crayon-sy">.</span><span class="crayon-cn">000003</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">stop</span><span class="crayon-o">-</span><span class="crayon-v">position</span><span class="crayon-o">=</span><span class="crayon-cn">208</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-v">mysql</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">h10</span><span class="crayon-sy">.</span><span class="crayon-cn">6.208.183</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">utest2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">p123</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">-</span><span class="crayon-i">P3310</span><span class="crayon-h"> </span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0014 seconds] -->
<p></p>
<div></div>
</div>
</div>
<h3 ><a name="toc-13"></a><span style="font-size: 1rem; line-height: 1.6; font-weight: bold; color: inherit;"><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">Linux使用Mutt发送邮件/附件</span>&nbsp;</span><br /></h3>
<div><span style="font-size: 1rem; line-height: 1.6;">http://www.isucc.me/129.html</span></div>
<div class="wiz-code-container" id="wiz_cm_1505574966054_192" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622b9977715636" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Centos安装 # 
yum install -y mutt
2.使用方法
最简单的测试方法
echo "Test" | mutt -s "Title" xxxx@qq.com
带附件的
echo "Test" | mutt -s "mysql backup" -a /mysql.tar.gz xxxx@qq.com</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b9977715636-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b9977715636-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b9977715636-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b9977715636-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b9977715636-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622b9977715636-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622b9977715636-7">7</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b9977715636-1"><span class="crayon-i">Centos</span>安装<span class="crayon-h"> </span><span class="crayon-p"># </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b9977715636-2"><span class="crayon-e">yum </span><span class="crayon-v">install</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">y</span><span class="crayon-h"> </span><span class="crayon-i">mutt</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b9977715636-3"><span class="crayon-cn">2.</span>使用方法</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b9977715636-4">最简单的测试方法</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b9977715636-5"><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"Test"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"Title"</span><span class="crayon-h"> </span><span class="crayon-v">xxxx</span><span class="crayon-sy">@</span><span class="crayon-v">qq</span><span class="crayon-sy">.</span><span class="crayon-i">com</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622b9977715636-6">带附件的</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622b9977715636-7"><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">"Test"</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">mutt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-s">"mysql backup"</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">mysql</span><span class="crayon-sy">.</span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-e">gz </span><span class="crayon-v">xxxx</span><span class="crayon-sy">@</span><span class="crayon-v">qq</span><span class="crayon-sy">.</span><span class="crayon-v">com</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
</p>
<div></div>
</div>
<h3 ><a name="toc-14"></a>VPS 自动备份脚本&nbsp;</h3>
<div><span style="font-size: 1rem; line-height: 1.6;">https://blog.onens.com/auto-backup-bash.html</span></div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505574995083_8028" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622bb342721906" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
没事自己写了两个脚本，一个是备份网站文件，另一个是备份数据库和配置文件，并把备份文件发送到邮箱。
安装 mutt：
yum install mutt

vim ~/.muttrc
# Add the following
set envelope_from=yes
set from=backup@yourdomain.com
set realname="Backup"
set use_from=yes

backup.sh：
config.sh：

crontab：
0 2 * * 2 /bin/bash /your-script-path/backup.sh
0 1 * * * /bin/bash /your-script-path/config.sh</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bb342721906-17">17</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-1">没事自己写了两个脚本，一个是备份网站文件，另一个是备份数据库和配置文件，并把备份文件发送到邮箱。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-2">安装<span class="crayon-h"> </span><span class="crayon-i">mutt</span>：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-3"><span class="crayon-e">yum </span><span class="crayon-e">install </span><span class="crayon-e">mutt</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-4">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-5"><span class="crayon-v">vim</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-o">/</span><span class="crayon-sy">.</span><span class="crayon-i">muttrc</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-6"><span class="crayon-p"># Add the following</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-7"><span class="crayon-e">set </span><span class="crayon-v">envelope_from</span><span class="crayon-o">=</span><span class="crayon-e">yes</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-8"><span class="crayon-e">set </span><span class="crayon-v">from</span><span class="crayon-o">=</span><span class="crayon-v">backup</span><span class="crayon-sy">@</span><span class="crayon-v">yourdomain</span><span class="crayon-sy">.</span><span class="crayon-e">com</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-9"><span class="crayon-e">set </span><span class="crayon-v">realname</span><span class="crayon-o">=</span><span class="crayon-s">"Backup"</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-10"><span class="crayon-e">set </span><span class="crayon-v">use_from</span><span class="crayon-o">=</span><span class="crayon-e">yes</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-12"><span class="crayon-v">backup</span><span class="crayon-sy">.</span><span class="crayon-i">sh</span>：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-13"><span class="crayon-v">config</span><span class="crayon-sy">.</span><span class="crayon-i">sh</span>：</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-14">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-15"><span class="crayon-i">crontab</span>：</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-16"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-v">bash</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">your</span><span class="crayon-o">-</span><span class="crayon-v">script</span><span class="crayon-o">-</span><span class="crayon-v">path</span><span class="crayon-o">/</span><span class="crayon-v">backup</span><span class="crayon-sy">.</span><span class="crayon-i">sh</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bb342721906-17"><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-v">bash</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">your</span><span class="crayon-o">-</span><span class="crayon-v">script</span><span class="crayon-o">-</span><span class="crayon-v">path</span><span class="crayon-o">/</span><span class="crayon-v">config</span><span class="crayon-sy">.</span><span class="crayon-v">sh</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
</p>
<div></div>
</div>
</div>
<h3 ><a name="toc-15"></a><span style="font-size: 1rem; line-height: 1.6; font-weight: bold; color: inherit;"><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">用邮箱备份VPS的数据 超简易教程&nbsp;</span></span><br /></h3>
<div><span style="font-size: 1rem; line-height: 1.6;">https://ilazycat.com/posts/2012/08/backup-vps-data-using-mailbox.html<br /></span></div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505574751886_558" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622bc709247204" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
DataBackUP.sh
额刚才忘了说了，这个脚本分为两部分，一部分是备份数据，一部分是备份数据库和配置文件的。。。这一部分是备份网站数据用得。。。
你要是觉得麻烦可以用最后一个整合的脚本。。。</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bc709247204-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bc709247204-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bc709247204-3">3</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bc709247204-1"><span class="crayon-v">DataBackUP</span><span class="crayon-sy">.</span><span class="crayon-i">sh</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bc709247204-2">额刚才忘了说了，这个脚本分为两部分，一部分是备份数据，一部分是备份数据库和配置文件的。。。这一部分是备份网站数据用得。。。</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bc709247204-3">你要是觉得麻烦可以用最后一个整合的脚本。。。</div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
</div>
<h3 ><a name="toc-16"></a><span style="font-size: 1rem; line-height: 1.6;">[SHELL]备份系统文件并邮件发送</span></h3>
<div><span style="font-size: 1rem; line-height: 1.6;">&nbsp;http://showerlee.blog.51cto.com/2047005/1283408</span></div>
<div><span style="font-size: 1rem; line-height: 1.6;"><img loading="lazy" class="alignnone size-full wp-image-2220" src="/wp-content/uploads/2017/12/039c280ff790f5ba515130334672ed98_0.02878437096215536.png" width="595" height="418" alt="039c280ff790f5ba515130334672ed98_0.02878437096215536" title="039c280ff790f5ba515130334672ed98_0.02878437096215536" /><br /></span></div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505574627039_7430" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622bd196712329" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
(版本三)
实现rar分割并附件发送
推荐附件超过50M的用户使用
# 安装rar
rar=$(rar | grep RAR | awk '{print $1}'| sed -n '1p')
if [ $? != 0 ];then</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bd196712329-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bd196712329-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bd196712329-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bd196712329-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622bd196712329-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622bd196712329-6">6</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bd196712329-1"><span class="crayon-sy">(</span>版本三<span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bd196712329-2">实现<span class="crayon-i">rar</span>分割并附件发送</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bd196712329-3">推荐附件超过<span class="crayon-cn">50M</span>的用户使用</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bd196712329-4"><span class="crayon-p"># 安装rar</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622bd196712329-5"><span class="crayon-v">rar</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">(</span><span class="crayon-v">rar</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-e">grep </span><span class="crayon-v">RAR</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-i">awk</span><span class="crayon-h"> </span><span class="crayon-s">'{print $1}'</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">sed</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">n</span><span class="crayon-h"> </span><span class="crayon-s">'1p'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622bd196712329-6"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">?</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-sy">]</span><span class="crayon-sy">;</span><span class="crayon-st">then</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
</p>
<div></div>
</div>
</div>
<h3 ><a name="toc-17"></a><span style="font-size: 1rem; line-height: 1.6;">用python自动备份网站到你的邮件中&nbsp;</span></h3>
<div><span style="font-size: 1rem; line-height: 1.6;">https://blog.iw3c.com/archive/1085<br /></span></div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505574854966_3415" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622c4642054917" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
# 备份名称，用于标记
BAKUP_NAME="bakup"
# 备份目录，多个请空格分隔
BAKUP_SRC="/home/wwwroot/iw3c.com"
# 备份文件临时存放目录，一般不需要更改
BAKUP_DIR="/tmp/bakuptoemail"
# Mysql主机地址
MYSQL_SERVER="localhost"
# Mysql用户名
MYSQL_USER="root"
# Mysql密码
MYSQL_PASS="password"
# Mysql备份数据库，多个请空格分隔
MYSQL_DBS="iw3c_com_db "
# 备份文件压缩密码
BAKUP_FILE_PASSWD="iw3c.com"
# 邮件SMTP地址
THESMTP_HOST="smtp.xxx.com"
# 邮件登录帐号
THESMTP_USER='aries@xxx.com'
# 邮件登录密码
THESMTP_PWD='password'
# 邮件接收地址
THESMTP_TO='xxx@xxx.com'</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-17">17</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-18">18</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-19">19</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-20">20</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-21">21</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-22">22</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-23">23</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c4642054917-24">24</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-1"><span class="crayon-p"># 备份名称，用于标记</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-2"><span class="crayon-v">BAKUP_NAME</span><span class="crayon-o">=</span><span class="crayon-s">"bakup"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-3"><span class="crayon-p"># 备份目录，多个请空格分隔</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-4"><span class="crayon-v">BAKUP_SRC</span><span class="crayon-o">=</span><span class="crayon-s">"/home/wwwroot/iw3c.com"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-5"><span class="crayon-p"># 备份文件临时存放目录，一般不需要更改</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-6"><span class="crayon-v">BAKUP_DIR</span><span class="crayon-o">=</span><span class="crayon-s">"/tmp/bakuptoemail"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-7"><span class="crayon-p"># Mysql主机地址</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-8"><span class="crayon-v">MYSQL_SERVER</span><span class="crayon-o">=</span><span class="crayon-s">"localhost"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-9"><span class="crayon-p"># Mysql用户名</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-10"><span class="crayon-v">MYSQL_USER</span><span class="crayon-o">=</span><span class="crayon-s">"root"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-11"><span class="crayon-p"># Mysql密码</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-12"><span class="crayon-v">MYSQL_PASS</span><span class="crayon-o">=</span><span class="crayon-s">"password"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-13"><span class="crayon-p"># Mysql备份数据库，多个请空格分隔</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-14"><span class="crayon-v">MYSQL_DBS</span><span class="crayon-o">=</span><span class="crayon-s">"iw3c_com_db "</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-15"><span class="crayon-p"># 备份文件压缩密码</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-16"><span class="crayon-v">BAKUP_FILE_PASSWD</span><span class="crayon-o">=</span><span class="crayon-s">"iw3c.com"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-17"><span class="crayon-p"># 邮件SMTP地址</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-18"><span class="crayon-v">THESMTP_HOST</span><span class="crayon-o">=</span><span class="crayon-s">"smtp.xxx.com"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-19"><span class="crayon-p"># 邮件登录帐号</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-20"><span class="crayon-v">THESMTP_USER</span><span class="crayon-o">=</span><span class="crayon-s">'aries@xxx.com'</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-21"><span class="crayon-p"># 邮件登录密码</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-22"><span class="crayon-v">THESMTP_PWD</span><span class="crayon-o">=</span><span class="crayon-s">'password'</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-23"><span class="crayon-p"># 邮件接收地址</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c4642054917-24"><span class="crayon-v">THESMTP_TO</span><span class="crayon-o">=</span><span class="crayon-s">'xxx@xxx.com'</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
</p>
<div></div>
</div>
</div>
<div><span style="font-size: 1rem; line-height: 1.6;"><br /></span></div>
<h3 ><a name="toc-18"></a><span style="font-size: 1rem; line-height: 1.6;">压缩&gt;</span><b style="color: inherit; font-size: 1rem; line-height: 1.6;">综合相关</b></h3>
<div>浅谈Linux下各种压缩 解压命令和压缩比率对比&nbsp;http://blog.sina.com.cn/s/blog_407abb0d0100lajg.html</div>
<div class="wiz-code-container" id="wiz_cm_1505576443458_6648" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622c5211418348" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
综合起来，在压缩比率上： tar.bz=tar.bz2&gt;tgz&gt;tar
耗费时间（打包，解压）
    打包：tar.bz&gt;tar.bz2&gt;tgz&gt;tar
    解压： tar.bz&gt;tar.bz2&gt;tar&gt;tgz
因此，Linux下对于占用空间与耗费时间的折衷多选用tgz格式，不仅压缩率较高，而且打包、解压的时间都较为快速，是较为理想的选择。
如果对效率很关切，非常在乎时间的话，选择tgz tar的方式都不错。当然，如果disk空间较为紧张，非常在乎空间的话，选择高压缩比率的tar.bz2则更为适宜。</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c5211418348-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c5211418348-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c5211418348-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c5211418348-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c5211418348-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c5211418348-6">6</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c5211418348-1">综合起来，在压缩比率上：<span class="crayon-h"> </span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">bz</span><span class="crayon-o">=</span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">bz2</span><span class="crayon-o">&gt;</span><span class="crayon-v">tgz</span><span class="crayon-o">&gt;</span><span class="crayon-i">tar</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c5211418348-2">耗费时间（打包，解压）</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c5211418348-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>打包：<span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">bz</span><span class="crayon-o">&gt;</span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">bz2</span><span class="crayon-o">&gt;</span><span class="crayon-v">tgz</span><span class="crayon-o">&gt;</span><span class="crayon-i">tar</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c5211418348-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>解压：<span class="crayon-h"> </span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">bz</span><span class="crayon-o">&gt;</span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">bz2</span><span class="crayon-o">&gt;</span><span class="crayon-v">tar</span><span class="crayon-o">&gt;</span><span class="crayon-i">tgz</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c5211418348-5">因此，<span class="crayon-i">Linux</span>下对于占用空间与耗费时间的折衷多选用<span class="crayon-i">tgz</span>格式，不仅压缩率较高，而且打包、解压的时间都较为快速，是较为理想的选择。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c5211418348-6">如果对效率很关切，非常在乎时间的话，选择<span class="crayon-e">tgz </span><span class="crayon-i">tar</span>的方式都不错。当然，如果<span class="crayon-i">disk</span>空间较为紧张，非常在乎空间的话，选择高压缩比率的<span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-i">bz2</span>则更为适宜。</div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
</p>
<div></div>
</div>
<div><b style="font-size: 1rem; line-height: 1.6; color: inherit;">Linux下解压：tar、rar、7z命令简单易懂的教程（含实例）</b></div>
<div><span style="font-size: 1rem; line-height: 1.6;">http://blog.csdn.net/ac_huang/article/details/23279641<br /></span></div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505575610838_9647" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622c7509468683" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
tar命令常见参数与实例：
——————————————————————————————————-
必须的参数：（3个参数不能共存）
-c ：创建压缩文件c代表create。

7z文件到解压缩实例
——————————————————————————————————-
安装：Redhat、Fedora、Centos安装命令：yum install p7zip</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c7509468683-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c7509468683-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c7509468683-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c7509468683-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c7509468683-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c7509468683-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c7509468683-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c7509468683-8">8</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c7509468683-1"><span class="crayon-i">tar</span>命令常见参数与实例：</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c7509468683-2">——————————————————————————————————<span class="crayon-o">-</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c7509468683-3">必须的参数：（<span class="crayon-cn">3</span>个参数不能共存）</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c7509468683-4"><span class="crayon-o">-</span><span class="crayon-i">c</span><span class="crayon-h"> </span>：创建压缩文件<span class="crayon-i">c</span>代表<span class="crayon-i">create</span>。</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c7509468683-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c7509468683-6"><span class="crayon-cn">7z</span>文件到解压缩实例</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c7509468683-7">——————————————————————————————————<span class="crayon-o">-</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c7509468683-8">安装：<span class="crayon-i">Redhat</span>、<span class="crayon-i">Fedora</span>、<span class="crayon-i">Centos</span>安装命令：<span class="crayon-e">yum </span><span class="crayon-e">install </span><span class="crayon-v">p7zip</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
</div>
<div><b><span style="font-size: 1rem; color: inherit; line-height: 1.6;">Linux zip分卷压缩&nbsp;</span><br /></b></div>
<div>http://blog.csdn.net/u010273224/article/details/54171696</div>
<div class="wiz-code-container" id="wiz_cm_1505573977386_5775" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622c8723026158" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
分卷压缩的话，需要先将文件打包成一个zip包，然后执行
zip -s SIZE origin.zip --out new.zip
SIZE为分卷的大小4m,4g,4t等
解压的时候需要先将它合并才能正常解压
zip spiltfile.zip -s=0 --out single.zip</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c8723026158-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c8723026158-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c8723026158-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c8723026158-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c8723026158-5">5</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c8723026158-1">分卷压缩的话，需要先将文件打包成一个<span class="crayon-i">zip</span>包，然后执行</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c8723026158-2"><span class="crayon-v">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-e">SIZE </span><span class="crayon-v">origin</span><span class="crayon-sy">.</span><span class="crayon-v">zip</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">out </span><span class="crayon-r">new</span><span class="crayon-sy">.</span><span class="crayon-e">zip</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c8723026158-3"><span class="crayon-i">SIZE</span>为分卷的大小<span class="crayon-cn">4m</span><span class="crayon-sy">,</span><span class="crayon-cn">4g</span><span class="crayon-sy">,</span><span class="crayon-cn">4t</span>等</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c8723026158-4">解压的时候需要先将它合并才能正常解压</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c8723026158-5"><span class="crayon-e">zip </span><span class="crayon-v">spiltfile</span><span class="crayon-sy">.</span><span class="crayon-v">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">s</span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">out </span><span class="crayon-v">single</span><span class="crayon-sy">.</span><span class="crayon-v">zip</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
</p>
<div></div>
</div>
<div><b>Linux系统zip压缩命令详细参数，附文件排除选项的正确用法</b></div>
<div>&nbsp;https://zhangge.net/4776.html</div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505641875118_5881" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622c9895873081" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
这次给博客添加了纯代码缓存之后，发现缓存文件竟然达到了50多MB！而我的服务器每次还需要同步至七牛，文件体积的增加都会增加文件远程同步备份的时间。因此，我第一想到的办法就是在网站ZIP压缩打包的时候排除缓存文件夹。
下面是从网上找来的ZIP命令参数：
zip Linux上适用的参数:
-1 : 最快压缩，压缩率最差。
-9 : 最大压缩，压缩率最佳。</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c9895873081-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c9895873081-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c9895873081-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622c9895873081-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622c9895873081-5">5</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c9895873081-1">这次给博客添加了纯代码缓存之后，发现缓存文件竟然达到了<span class="crayon-cn">50</span>多<span class="crayon-i">MB</span>！而我的服务器每次还需要同步至七牛，文件体积的增加都会增加文件远程同步备份的时间。因此，我第一想到的办法就是在网站<span class="crayon-i">ZIP</span>压缩打包的时候排除缓存文件夹。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c9895873081-2">下面是从网上找来的<span class="crayon-i">ZIP</span>命令参数：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c9895873081-3"><span class="crayon-e">zip </span><span class="crayon-i">Linux</span>上适用的参数<span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622c9895873081-4"><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span>最快压缩，压缩率最差。</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622c9895873081-5"><span class="crayon-o">-</span><span class="crayon-cn">9</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span>最大压缩，压缩率最佳。</div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
</div>
<div><b>Linux 下zip包的压缩与解压</b></div>
<div>&nbsp;https://www.cnblogs.com/chinareny2k/archive/2010/01/05/1639468.html</div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505641936997_7040" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622cb360995459" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
linux zip 命令详解 
功能说明：压缩文件。 
语 法：zip [-AcdDfFghjJKlLmoqrSTuvVwXyz$][-b &lt;工作目录&gt;][-ll][-n &lt;字尾字符串&gt;][-t &lt;日期时间&gt;][-&lt;压缩效率&gt;][压缩文件][文件...][-i &lt;范本样式&gt;][-x &lt;范本样式&gt;] 
补充说明：zip是个使用广泛的压缩程序，文件经它压缩后会另外产生具有".zip"扩展名的压缩文件。 
参 数： 
-A 调整可执行的自动解压缩文件。 
-b&lt;工作目录&gt; 指定暂时存放文件的目录。 </textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622cb360995459-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622cb360995459-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622cb360995459-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622cb360995459-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622cb360995459-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622cb360995459-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622cb360995459-7">7</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622cb360995459-1"><span class="crayon-e">linux </span><span class="crayon-i">zip</span><span class="crayon-h"> </span>命令详解<span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622cb360995459-2">功能说明：压缩文件。<span class="crayon-h"> </span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622cb360995459-3">语<span class="crayon-h"> </span>法：<span class="crayon-i">zip</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">AcdDfFghjJKlLmoqrSTuvVwXyz</span><span class="crayon-sy">$</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">b</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span>工作目录<span class="crayon-o">&gt;</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">ll</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span>字尾字符串<span class="crayon-o">&gt;</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span>日期时间<span class="crayon-o">&gt;</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-o">&lt;</span>压缩效率<span class="crayon-o">&gt;</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span>压缩文件<span class="crayon-sy">]</span><span class="crayon-sy">[</span>文件<span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span>范本样式<span class="crayon-o">&gt;</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span>范本样式<span class="crayon-o">&gt;</span><span class="crayon-sy">]</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622cb360995459-4">补充说明：<span class="crayon-i">zip</span>是个使用广泛的压缩程序，文件经它压缩后会另外产生具有<span class="crayon-s">".zip"</span>扩展名的压缩文件。<span class="crayon-h"> </span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622cb360995459-5">参<span class="crayon-h"> </span>数：<span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622cb360995459-6"><span class="crayon-o">-</span><span class="crayon-i">A</span><span class="crayon-h"> </span>调整可执行的自动解压缩文件。<span class="crayon-h"> </span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622cb360995459-7"><span class="crayon-o">-</span><span class="crayon-v">b</span><span class="crayon-o">&lt;</span>工作目录<span class="crayon-o">&gt;</span><span class="crayon-h"> </span>指定暂时存放文件的目录。<span class="crayon-h"> </span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
</p>
<div></div>
</div>
</div>
<div><b><span style="font-size: 1rem; color: inherit; line-height: 1.6;">linux下分卷压缩，合并解压的3种方法&nbsp;</span><br /></b></div>
<div>http://blog.csdn.net/aree/article/details/50946137 、http://blog.51yip.com/linux/988.html</div>
<div class="wiz-code-container" id="wiz_cm_1505574039680_5916" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622d2231090685" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
我们上传东西的时候，由于文件过大而不能上传，或者不给上传，最明显的就是发邮件了，附件最大5M，有的10M。如果超过了就郁闷了。这个时候，如果能把压缩的东西，分割开来就比较爽了，windows下面我想大家知道怎么分割，利用winrar，winzip图型化设置压缩出来的块的大小。但是在linux下面有没有这样的方法了，linux下面有rar命令，有zip命令，windows下面这二种方式可以分割压缩,我想linux下面绝对也是可以的。下面是我尝试过程的记录：</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d2231090685-1">1</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d2231090685-1">我们上传东西的时候，由于文件过大而不能上传，或者不给上传，最明显的就是发邮件了，附件最大<span class="crayon-cn">5M</span>，有的<span class="crayon-cn">10M</span>。如果超过了就郁闷了。这个时候，如果能把压缩的东西，分割开来就比较爽了，<span class="crayon-i">windows</span>下面我想大家知道怎么分割，利用<span class="crayon-i">winrar</span>，<span class="crayon-i">winzip</span>图型化设置压缩出来的块的大小。但是在<span class="crayon-i">linux</span>下面有没有这样的方法了，<span class="crayon-i">linux</span>下面有<span class="crayon-i">rar</span>命令，有<span class="crayon-i">zip</span>命令，<span class="crayon-i">windows</span>下面这二种方式可以分割压缩<span class="crayon-sy">,</span>我想<span class="crayon-i">linux</span>下面绝对也是可以的。下面是我尝试过程的记录：</div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div><b>Linux下分卷压缩较大的文件&nbsp;</b></div>
<div>http://blog.csdn.net/baggio1006/article/details/17503113</div>
<div class="wiz-code-container" id="wiz_cm_1505574405932_586" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622d4873615431" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
附录：split命令的使用
split proc.tar.gz -b 2m #将proc.tar.gz文件分割为多个小文件，并保持每个小文件的大小不超过2m字节。命令运行后，源文件依然存在。生成的小文件以默认格式命名，为：xaa、xab等
split proc.tar.gz -b 2m -d #基本同上，只是生成的小文件以数字格式命名，为：x00、x01等
split proc.tar.gz -b 2m -d proc.tar.gz #基本同上，只是生成的小文件名前缀是自定义的，为：proc.tar.gz00、proc.tar.gz01等
split a.txt -C 300k -d a.txt #将a.txt文本文件分割为多个小文件，并保持每个小文件的大小不超过300k字节，而且尽量保持每行的完整性</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d4873615431-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d4873615431-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d4873615431-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d4873615431-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d4873615431-5">5</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d4873615431-1">附录：<span class="crayon-i">split</span>命令的使用</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d4873615431-2"><span class="crayon-e">split </span><span class="crayon-v">proc</span><span class="crayon-sy">.</span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">gz</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">b</span><span class="crayon-h"> </span><span class="crayon-cn">2m</span><span class="crayon-h"> </span><span class="crayon-p">#将proc.tar.gz文件分割为多个小文件，并保持每个小文件的大小不超过2m字节。命令运行后，源文件依然存在。生成的小文件以默认格式命名，为：xaa、xab等</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d4873615431-3"><span class="crayon-e">split </span><span class="crayon-v">proc</span><span class="crayon-sy">.</span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">gz</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">b</span><span class="crayon-h"> </span><span class="crayon-cn">2m</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-p">#基本同上，只是生成的小文件以数字格式命名，为：x00、x01等</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d4873615431-4"><span class="crayon-e">split </span><span class="crayon-v">proc</span><span class="crayon-sy">.</span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-v">gz</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">b</span><span class="crayon-h"> </span><span class="crayon-cn">2m</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-v">proc</span><span class="crayon-sy">.</span><span class="crayon-v">tar</span><span class="crayon-sy">.</span><span class="crayon-i">gz</span><span class="crayon-h"> </span><span class="crayon-p">#基本同上，只是生成的小文件名前缀是自定义的，为：proc.tar.gz00、proc.tar.gz01等</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d4873615431-5"><span class="crayon-i">split</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-v">txt</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">C</span><span class="crayon-h"> </span><span class="crayon-cn">300k</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-i">txt</span><span class="crayon-h"> </span><span class="crayon-p">#将a.txt文本文件分割为多个小文件，并保持每个小文件的大小不超过300k字节，而且尽量保持每行的完整性</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
</p>
<div></div>
</div>
<div><b>CentOS 安装 rar、zip 解压缩&nbsp;</b></div>
<div>https://ehlxr.me/2016/12/22/CentOS-%E5%AE%89%E8%A3%85-rar%E3%80%81zip-%E8%A7%A3%E5%8E%8B%E7%BC%A9/</div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505575177563_5299" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622d5377971038" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Windows 系统压缩的 rar 和 zip 文件，在 Linux 系统下是无法通过 tar 命令解压缩的，需要使用 rar 和 zip 命令来解压缩。下面记录一下 rar 和 zip 安装和简单的使用。
一、rar 安装使用
Linux 系统下使用 rarlinux 解压缩 rar 压缩文件，下载页面：http://www.rarsoft.com/download.htm。
1.1 下载系统对应的版本
2.2 安装 zip、unzip
$ yum install zip
$ yum install unzip
2.3 常用命令
$ zip -r myfile.zip ./*
# 将当前目录下的所有文件和文件夹全部压缩成 myfile.zip 文件，-r 表示递归压缩子目录下所有文件.
$ unzip -o -d /home/sunny myfile.zip
# 把 myfile.zip 文件解压到 /home/sunny/
# -o ：不提示的情况下覆盖文件
# -d：将文件解压缩到指定目录下
$ zip -d myfile.zip smart.txt
# 删除压缩文件中 smart.txt 文件
$ zip -m myfile.zip ./rpm_info.txt
# 向压缩文件中 myfile.zip 中添加 rpm_info.txt 文件</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-17">17</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d5377971038-18">18</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-1"><span class="crayon-i">Windows</span><span class="crayon-h"> </span>系统压缩的<span class="crayon-h"> </span><span class="crayon-i">rar</span><span class="crayon-h"> </span>和<span class="crayon-h"> </span><span class="crayon-i">zip</span><span class="crayon-h"> </span>文件，在<span class="crayon-h"> </span><span class="crayon-i">Linux</span><span class="crayon-h"> </span>系统下是无法通过<span class="crayon-h"> </span><span class="crayon-i">tar</span><span class="crayon-h"> </span>命令解压缩的，需要使用<span class="crayon-h"> </span><span class="crayon-i">rar</span><span class="crayon-h"> </span>和<span class="crayon-h"> </span><span class="crayon-i">zip</span><span class="crayon-h"> </span>命令来解压缩。下面记录一下<span class="crayon-h"> </span><span class="crayon-i">rar</span><span class="crayon-h"> </span>和<span class="crayon-h"> </span><span class="crayon-i">zip</span><span class="crayon-h"> </span>安装和简单的使用。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-2">一、<span class="crayon-i">rar</span><span class="crayon-h"> </span>安装使用</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-3"><span class="crayon-i">Linux</span><span class="crayon-h"> </span>系统下使用<span class="crayon-h"> </span><span class="crayon-i">rarlinux</span><span class="crayon-h"> </span>解压缩<span class="crayon-h"> </span><span class="crayon-i">rar</span><span class="crayon-h"> </span>压缩文件，下载页面：<span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//www.rarsoft.com/download.htm。</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-4"><span class="crayon-cn">1.1</span><span class="crayon-h"> </span>下载系统对应的版本</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-5"><span class="crayon-cn">2.2</span><span class="crayon-h"> </span>安装<span class="crayon-h"> </span><span class="crayon-i">zip</span>、<span class="crayon-i">unzip</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-6"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">yum </span><span class="crayon-e">install </span><span class="crayon-i">zip</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-7"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">yum </span><span class="crayon-e">install </span><span class="crayon-i">unzip</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-8"><span class="crayon-cn">2.3</span><span class="crayon-h"> </span>常用命令</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-9"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">myfile</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-o">/</span><span class="crayon-o">*</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-10"><span class="crayon-p"># 将当前目录下的所有文件和文件夹全部压缩成 myfile.zip 文件，-r 表示递归压缩子目录下所有文件.</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-11"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">unzip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">o</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">d</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">home</span><span class="crayon-o">/</span><span class="crayon-e">sunny </span><span class="crayon-v">myfile</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-12"><span class="crayon-p"># 把 myfile.zip 文件解压到 /home/sunny/</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-13"><span class="crayon-p"># -o ：不提示的情况下覆盖文件</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-14"><span class="crayon-p"># -d：将文件解压缩到指定目录下</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-15"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-v">myfile</span><span class="crayon-sy">.</span><span class="crayon-e">zip </span><span class="crayon-v">smart</span><span class="crayon-sy">.</span><span class="crayon-i">txt</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-16"><span class="crayon-p"># 删除压缩文件中 smart.txt 文件</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-17"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">m</span><span class="crayon-h"> </span><span class="crayon-v">myfile</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-o">/</span><span class="crayon-v">rpm_info</span><span class="crayon-sy">.</span><span class="crayon-i">txt</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d5377971038-18"><span class="crayon-p"># 向压缩文件中 myfile.zip 中添加 rpm_info.txt 文件</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
</p>
<div></div>
</div>
</div>
<div><b>Linux下的压缩（zip）解压(unzip)缩命令</b></div>
<div>&nbsp;http://blog.csdn.net/shenyunsese/article/details/17556089</div>
<div class="wiz-code-container" id="wiz_cm_1505575342384_9242" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622d6899397778" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
1.zip命令
zip -r myfile.zip ./*
将当前目录下的所有文件和文件夹全部压缩成myfile.zip文件,－r表示递归压缩子目录下所有文件.
zip -r filename.zip filesdir
在这个例子里，filename.zip 代表你创建的文件，filesdir 代表你想放置新 zip 文件的目录。-r 选项指定你想递归地（recursively）包括所有包括在 filesdir 目录中的文件。

你可以使用 zip 命令同时处理多个文件和目录，方法是将它们逐一列出，并用空格间隔：
zip -r filename.zip file1 file2 file3 /usr/work/school 
上面的命令把 file1、file2、 file3、以及 /usr/work/school 目录的内容（假设这个目录存在）压缩起来，然后放入 filename.zip 文件中。</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d6899397778-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d6899397778-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d6899397778-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d6899397778-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d6899397778-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d6899397778-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d6899397778-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d6899397778-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d6899397778-9">9</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d6899397778-1"><span class="crayon-cn">1.zip</span>命令</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d6899397778-2"><span class="crayon-v">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">myfile</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-o">/</span><span class="crayon-o">*</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d6899397778-3">将当前目录下的所有文件和文件夹全部压缩成<span class="crayon-v">myfile</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span>文件<span class="crayon-sy">,</span>－<span class="crayon-i">r</span>表示递归压缩子目录下所有文件<span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d6899397778-4"><span class="crayon-v">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">filename</span><span class="crayon-sy">.</span><span class="crayon-e">zip </span><span class="crayon-i">filesdir</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d6899397778-5">在这个例子里，<span class="crayon-v">filename</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span><span class="crayon-h"> </span>代表你创建的文件，<span class="crayon-i">filesdir</span><span class="crayon-h"> </span>代表你想放置新<span class="crayon-h"> </span><span class="crayon-i">zip</span><span class="crayon-h"> </span>文件的目录。<span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span>选项指定你想递归地（<span class="crayon-i">recursively</span>）包括所有包括在<span class="crayon-h"> </span><span class="crayon-i">filesdir</span><span class="crayon-h"> </span>目录中的文件。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d6899397778-6">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d6899397778-7">你可以使用<span class="crayon-h"> </span><span class="crayon-i">zip</span><span class="crayon-h"> </span>命令同时处理多个文件和目录，方法是将它们逐一列出，并用空格间隔：</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d6899397778-8"><span class="crayon-v">zip</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">filename</span><span class="crayon-sy">.</span><span class="crayon-e">zip </span><span class="crayon-e">file1 </span><span class="crayon-e">file2 </span><span class="crayon-v">file3</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">work</span><span class="crayon-o">/</span><span class="crayon-i">school</span><span class="crayon-h"> </span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d6899397778-9">上面的命令把<span class="crayon-h"> </span><span class="crayon-i">file1</span>、<span class="crayon-i">file2</span>、<span class="crayon-h"> </span><span class="crayon-i">file3</span>、以及<span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">work</span><span class="crayon-o">/</span><span class="crayon-i">school</span><span class="crayon-h"> </span>目录的内容（假设这个目录存在）压缩起来，然后放入<span class="crayon-h"> </span><span class="crayon-v">filename</span><span class="crayon-sy">.</span><span class="crayon-i">zip</span><span class="crayon-h"> </span>文件中。</div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
</p>
<div></div>
</div>
<div></div>
<h3 ><a name="toc-19"></a>压缩&gt;7zip相关文献</h3>
<div><b>CentOS中如何安装7ZIP </b>&nbsp;</div>
<div>https://teddysun.com/176.html</div>
<div class="wiz-code-container" id="wiz_cm_1505575920052_7301" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622d9738404998" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
使用7zip的命令是7za。
安装完成后的使用方法：
7za {a|d|l|e|u|x} 压缩包文件名 {文件列表或目录，可选}

a  向压缩包里添加文件或创建压缩包，如向001.7z添加001.jpg，执行：7za a 001.7z 001.jpg；将001目录打包执行：7za a 001.7z 001；
d  从压缩里删除文件，如将001.7z里的001.jpg删除，执行：7za d 001.7z 001.jpg
l  列出压缩包里的文件，如列出001.7z里的文件，执行：7za l 001.7z
e  解压到当前目录，目录结构会被破坏，如001.rar内有如下目录及文件123/456/789.html，
执行：7za e 001.rar，目录123和456及文件789.html都会存放在当前目录下。
x  以完整路径解压。

zip文件解压中文文件乱码问题，由于zip文件中没有声明其编码，所以在Linux上使用unzip解压以默认编码解压，中文文件名会出现乱码。</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622d9738404998-12">12</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-1">使用<span class="crayon-cn">7zip</span>的命令是<span class="crayon-cn">7za</span>。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-2">安装完成后的使用方法：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-3"><span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-v">a</span><span class="crayon-o">|</span><span class="crayon-v">d</span><span class="crayon-o">|</span><span class="crayon-v">l</span><span class="crayon-o">|</span><span class="crayon-v">e</span><span class="crayon-o">|</span><span class="crayon-v">u</span><span class="crayon-o">|</span><span class="crayon-v">x</span><span class="crayon-sy">}</span><span class="crayon-h"> </span>压缩包文件名<span class="crayon-h"> </span><span class="crayon-sy">{</span>文件列表或目录，可选<span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-4">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-5"><span class="crayon-i">a</span><span class="crayon-h">&nbsp;&nbsp;</span>向压缩包里添加文件或创建压缩包，如向<span class="crayon-cn">001.7z</span>添加<span class="crayon-cn">001.jpg</span>，执行：<span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-cn">001.7z</span><span class="crayon-h"> </span><span class="crayon-cn">001.jpg</span>；将<span class="crayon-cn">001</span>目录打包执行：<span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-cn">001.7z</span><span class="crayon-h"> </span><span class="crayon-cn">001</span>；</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-6"><span class="crayon-i">d</span><span class="crayon-h">&nbsp;&nbsp;</span>从压缩里删除文件，如将<span class="crayon-cn">001.7z</span>里的<span class="crayon-cn">001.jpg</span>删除，执行：<span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-i">d</span><span class="crayon-h"> </span><span class="crayon-cn">001.7z</span><span class="crayon-h"> </span><span class="crayon-cn">001.jpg</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-7"><span class="crayon-i">l</span><span class="crayon-h">&nbsp;&nbsp;</span>列出压缩包里的文件，如列出<span class="crayon-cn">001.7z</span>里的文件，执行：<span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-i">l</span><span class="crayon-h"> </span><span class="crayon-cn">001.7z</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-8"><span class="crayon-i">e</span><span class="crayon-h">&nbsp;&nbsp;</span>解压到当前目录，目录结构会被破坏，如<span class="crayon-cn">001.rar</span>内有如下目录及文件<span class="crayon-cn">123</span><span class="crayon-o">/</span><span class="crayon-cn">456</span><span class="crayon-o">/</span><span class="crayon-cn">789.html</span>，</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-9">执行：<span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-i">e</span><span class="crayon-h"> </span><span class="crayon-cn">001.rar</span>，目录<span class="crayon-cn">123</span>和<span class="crayon-cn">456</span>及文件<span class="crayon-cn">789.html</span>都会存放在当前目录下。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-10"><span class="crayon-i">x</span><span class="crayon-h">&nbsp;&nbsp;</span>以完整路径解压。</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622d9738404998-12"><span class="crayon-i">zip</span>文件解压中文文件乱码问题，由于<span class="crayon-i">zip</span>文件中没有声明其编码，所以在<span class="crayon-i">Linux</span>上使用<span class="crayon-i">unzip</span>解压以默认编码解压，中文文件名会出现乱码。</div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
</p>
<div></div>
</div>
<div><b style="color: inherit; font-size: 1rem; line-height: 1.6;">How to create multipart 7zip file in Linux?&nbsp;</b></div>
<div>https://superuser.com/questions/184557/how-to-create-multipart-7zip-file-in-linux</div>
<div class="wiz-code-container" id="wiz_cm_1505576265172_9702" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622db095219313" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
Full command example: 7z -v100m a my_zip.7z my_folder/
Use the -v option (v is for volume) -v100m will split the archive into chunks of 100MB.
7z -v option supports b k m g (bytes, kilobytes, megabytes, gigabytes)</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622db095219313-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622db095219313-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622db095219313-3">3</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622db095219313-1"><span class="crayon-e">Full </span><span class="crayon-e">command </span><span class="crayon-v">example</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">7z</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">v100m</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-v">my_zip</span><span class="crayon-sy">.</span><span class="crayon-cn">7z</span><span class="crayon-h"> </span><span class="crayon-v">my_folder</span><span class="crayon-o">/</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622db095219313-2"><span class="crayon-st">Use</span><span class="crayon-h"> </span><span class="crayon-v">the</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-e">option</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">volume</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">v100m </span><span class="crayon-e">will </span><span class="crayon-e">split </span><span class="crayon-e">the </span><span class="crayon-e">archive </span><span class="crayon-e">into </span><span class="crayon-e">chunks </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">100MB.</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622db095219313-3"><span class="crayon-cn">7z</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-e">option </span><span class="crayon-i">supports</span><span class="crayon-h"> </span><span class="crayon-i">b</span><span class="crayon-h"> </span><span class="crayon-i">k</span><span class="crayon-h"> </span><span class="crayon-i">m</span><span class="crayon-h"> </span><span class="crayon-e">g</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">bytes</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">kilobytes</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">megabytes</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gigabytes</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
</p>
<div></div>
</div>
<div><b style="color: inherit; font-size: 1rem; line-height: 1.6;">How to use 7zip on Linux command Line</b></div>
<div>&nbsp;https://www.ibm.com/developerworks/community/blogs/6e6f6d1b-95c3-46df-8a26-b7efd8ee4b57/entry/how_to_use_7zip_on_linux_command_line144?lang=en</div>
<div class="wiz-code-container" id="wiz_cm_1505575792001_9659" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622dc516070097" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
7z uses plugins to handle archives. 
7za is a stand-alone executable. 7za handles fewer archive formats than 7z, but does not need any others. 
7zr is a stand-alone executable. 7zr handles fewer archive formats than 7z, but does not need any others. 7zr is a "light-version" of 7za that only handles 7z archives.</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622dc516070097-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622dc516070097-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622dc516070097-3">3</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622dc516070097-1"><span class="crayon-cn">7z</span><span class="crayon-h"> </span><span class="crayon-e">uses </span><span class="crayon-e">plugins </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">handle </span><span class="crayon-v">archives</span><span class="crayon-sy">.</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622dc516070097-2"><span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-v">stand</span><span class="crayon-o">-</span><span class="crayon-e">alone </span><span class="crayon-v">executable</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-e">handles </span><span class="crayon-e">fewer </span><span class="crayon-e">archive </span><span class="crayon-e">formats </span><span class="crayon-i">than</span><span class="crayon-h"> </span><span class="crayon-cn">7z</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">but </span><span class="crayon-e">does </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-e">need </span><span class="crayon-e">any </span><span class="crayon-v">others</span><span class="crayon-sy">.</span><span class="crayon-h"> </span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622dc516070097-3"><span class="crayon-cn">7zr</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-v">stand</span><span class="crayon-o">-</span><span class="crayon-e">alone </span><span class="crayon-v">executable</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-cn">7zr</span><span class="crayon-h"> </span><span class="crayon-e">handles </span><span class="crayon-e">fewer </span><span class="crayon-e">archive </span><span class="crayon-e">formats </span><span class="crayon-i">than</span><span class="crayon-h"> </span><span class="crayon-cn">7z</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">but </span><span class="crayon-e">does </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-e">need </span><span class="crayon-e">any </span><span class="crayon-v">others</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-cn">7zr</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-s">"light-version"</span><span class="crayon-h"> </span><span class="crayon-i">of</span><span class="crayon-h"> </span><span class="crayon-cn">7za</span><span class="crayon-h"> </span><span class="crayon-e">that </span><span class="crayon-e">only </span><span class="crayon-i">handles</span><span class="crayon-h"> </span><span class="crayon-cn">7z</span><span class="crayon-h"> </span><span class="crayon-v">archives</span><span class="crayon-sy">.</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
</p>
<div></div>
</div>
<h4></h4>
<h3 ><a name="toc-20"></a>Shell相关文献</h3>
<div><b>shell 将字符串分割成数组&nbsp;</b></div>
<div>https://my.oschina.net/5lei/blog/189559</div>
<div class="wiz-code-container" id="wiz_cm_1505610464067_2085" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622dd745649648" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
a="one,two,three,four"
arr=($a)用于将字符串$a分割到数组$arr ${arr[0]} ${arr[1]} </textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622dd745649648-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622dd745649648-2">2</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622dd745649648-1"><span class="crayon-v">a</span><span class="crayon-o">=</span><span class="crayon-s">"one,two,three,four"</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622dd745649648-2"><span class="crayon-v">arr</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">a</span><span class="crayon-sy">)</span>用于将字符串<span class="crayon-sy">$</span><span class="crayon-e">a</span>分割到数组<span class="crayon-sy">$</span><span class="crayon-e">arr</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">arr</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">arr</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span><span class="crayon-h"> </span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
</p>
<div></div>
</div>
<div><b style="color: inherit; font-size: 1rem; line-height: 1.6;">Shell 数组元素个数${#array[@]} 数组的所有元素${array[*]} 字符串长度${#str}&nbsp;</b></div>
<div>http://zhenshi4597.blog.51cto.com/1891465/871166</div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505610572811_3969" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622df620733316" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
1、获取数组元素的个数:
        array=(bill   chen  bai   hu);
        num=${#array[@]}  </textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622df620733316-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622df620733316-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622df620733316-3">3</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622df620733316-1"><span class="crayon-cn">1</span>、获取数组元素的个数<span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622df620733316-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">array</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-e">bill&nbsp;&nbsp; </span><span class="crayon-e">chen&nbsp;&nbsp;</span><span class="crayon-e">bai&nbsp;&nbsp; </span><span class="crayon-v">hu</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622df620733316-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">num</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#array[@]}&nbsp;&nbsp;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
</p>
<div></div>
</div>
<div><b style="color: inherit; font-size: 1rem; line-height: 1.6;">SHELL脚本中的数组</b><span style="color: inherit; font-size: 1rem; line-height: 1.6;">&nbsp;</span></div>
</div>
<div><span style="color: inherit; font-size: 1rem; line-height: 1.6;">http://smilejay.com/2016/04/array-in-bash/</span></div>
<div>
<div class="wiz-code-container" id="wiz_cm_1505610676980_4931" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622e2854204020" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
4. 数组的长度（元素的个数）和元素的字符串长度
数组的长度就是元素的个数，通过 ${#array_name[@]} 或 ${#array_name[*]} 获取；其中某个元素的字符串长度 ${#array_name[index]} 。

5. 数组的截断
{array_name[@]:1} 表示除了第1个元素（小标0）之外的所有元素
{array_name[@]:1:4} 表示第2、3、4个（下标为1，2，4-1）元素</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e2854204020-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e2854204020-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e2854204020-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e2854204020-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e2854204020-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e2854204020-6">6</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e2854204020-1"><span class="crayon-cn">4.</span><span class="crayon-h"> </span>数组的长度（元素的个数）和元素的字符串长度</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e2854204020-2">数组的长度就是元素的个数，通过<span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#array_name[@]} 或 ${#array_name[*]} 获取；其中某个元素的字符串长度 ${#array_name[index]} 。</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e2854204020-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e2854204020-4"><span class="crayon-cn">5.</span><span class="crayon-h"> </span>数组的截断</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e2854204020-5"><span class="crayon-sy">{</span><span class="crayon-v">array_name</span><span class="crayon-sy">[</span><span class="crayon-sy">@</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-cn">1</span><span class="crayon-sy">}</span><span class="crayon-h"> </span>表示除了第<span class="crayon-cn">1</span>个元素（小标<span class="crayon-cn">0</span>）之外的所有元素</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e2854204020-6"><span class="crayon-sy">{</span><span class="crayon-v">array_name</span><span class="crayon-sy">[</span><span class="crayon-sy">@</span><span class="crayon-sy">]</span><span class="crayon-o">:</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-cn">4</span><span class="crayon-sy">}</span><span class="crayon-h"> </span>表示第<span class="crayon-cn">2</span>、<span class="crayon-cn">3</span>、<span class="crayon-cn">4</span>个（下标为<span class="crayon-cn">1</span>，<span class="crayon-cn">2</span>，<span class="crayon-cn">4</span><span class="crayon-o">-</span><span class="crayon-cn">1</span>）元素</div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
</p>
<div></div>
</div>
</div>
<div><b style="color: inherit; font-size: 1rem; line-height: 1.6;">Shell编程中的数组定义、遍历&nbsp;</b></div>
<div>https://www.coder4.com/archives/3853</div>
<div class="wiz-code-container" id="wiz_cm_1505610993488_9785" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622e3894162832" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
数组定义：
    arr=(1 2 3 4 5) # 注意是用空格分开，不是逗号！！
数组定义法2：
    array
    array[0]="a"
    array[1]="b"
    array[2]="c"</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e3894162832-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e3894162832-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e3894162832-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e3894162832-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e3894162832-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e3894162832-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e3894162832-7">7</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e3894162832-1">数组定义：</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e3894162832-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">arr</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-p"># 注意是用空格分开，不是逗号！！</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e3894162832-3">数组定义法<span class="crayon-cn">2</span>：</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e3894162832-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">array</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e3894162832-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-s">"a"</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e3894162832-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-s">"b"</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e3894162832-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-s">"c"</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
</p>
<div></div>
</div>
<div><b style="color: inherit; font-size: 1rem; line-height: 1.6;">Shell数组：shell数组的定义、数组长度&nbsp;</b></div>
<div>http://c.biancheng.net/cpp/view/7002.html</div>
<div class="wiz-code-container" id="wiz_cm_1505611150904_5473" data-mode="Shell" data-theme="default"><!-- Urvanov Syntax Highlighter v2.8.27 -->

		<div id="urvanov-syntax-highlighter-630f52ed622e5312650373" class="urvanov-syntax-highlighter-syntax crayon-theme-classic urvanov-syntax-highlighter-font-monaco urvanov-syntax-highlighter-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="urvanov-syntax-highlighter-plain-wrap"><textarea  class="urvanov-syntax-highlighter-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
定义数组
在Shell中，用括号来表示数组，数组元素用“空格”符号分割开。定义数组的一般形式为：
    array_name=(value1 ... valuen)
    例如：
    array_name=(value0 value1 value2 value3)
    或者
    array_name=(
    value0
    value1
    value2
    value3
    )
还可以单独定义数组的各个分量：
    array_name[0]=value0
    array_name[1]=value1
    array_name[2]=value2
可以不使用连续的下标，而且下标的范围没有限制。

读取数组
读取数组元素值的一般格式是：
    ${array_name[index]}
    例如：
    valuen=${array_name[2]}

获取数组的长度
获取数组长度的方法与获取字符串长度的方法相同，例如：
    # 取得数组元素的个数
    length=${#array_name[@]}
    # 或者
    length=${#array_name[*]}
    # 取得数组单个元素的长度
    lengthn=${#array_name[n]}</textarea></div>
			<div class="urvanov-syntax-highlighter-main" style="">
				<table class="crayon-table">
					<tr class="urvanov-syntax-highlighter-row">
				<td class="crayon-nums " data-settings="show">
					<div class="urvanov-syntax-highlighter-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-1">1</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-2">2</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-3">3</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-4">4</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-5">5</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-6">6</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-7">7</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-8">8</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-9">9</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-10">10</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-11">11</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-12">12</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-13">13</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-14">14</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-15">15</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-16">16</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-17">17</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-18">18</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-19">19</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-20">20</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-21">21</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-22">22</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-23">23</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-24">24</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-25">25</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-26">26</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-27">27</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-28">28</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-29">29</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-30">30</div><div class="crayon-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-31">31</div><div class="crayon-num crayon-striped-num" data-line="urvanov-syntax-highlighter-630f52ed622e5312650373-32">32</div></div>
				</td>
						<td class="urvanov-syntax-highlighter-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-1">定义数组</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-2">在<span class="crayon-i">Shell</span>中，用括号来表示数组，数组元素用“空格”符号分割开。定义数组的一般形式为：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">array_name</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-i">value1</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">valuen</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>例如：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">array_name</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-e">value0 </span><span class="crayon-e">value1 </span><span class="crayon-e">value2 </span><span class="crayon-v">value3</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>或者</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">array_name</span><span class="crayon-o">=</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">value0</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-9"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">value1</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-10"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">value2</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-11"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">value3</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-13">还可以单独定义数组的各个分量：</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">array_name</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-e">value0</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-15"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">array_name</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-e">value1</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-16"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">array_name</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-o">=</span><span class="crayon-e">value2</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-17">可以不使用连续的下标，而且下标的范围没有限制。</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-18">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-19">读取数组</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-20">读取数组元素值的一般格式是：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">array_name</span><span class="crayon-sy">[</span><span class="crayon-v">index</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>例如：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">valuen</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-v">array_name</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-24">&nbsp;</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-25">获取数组的长度</div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-26">获取数组长度的方法与获取字符串长度的方法相同，例如：</div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># 取得数组元素的个数</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">length</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#array_name[@]}</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># 或者</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">length</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#array_name[*]}</span></div><div class="crayon-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p"># 取得数组单个元素的长度</span></div><div class="crayon-line crayon-striped-line" id="urvanov-syntax-highlighter-630f52ed622e5312650373-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">lengthn</span><span class="crayon-o">=</span><span class="crayon-sy">$</span><span class="crayon-sy">{</span><span class="crayon-p">#array_name[n]}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0004 seconds] -->
</p>
<div></div>
</div>
<div></div>
<p><wiz_tmp_tag id="wiz-table-range-border" contenteditable="false" style="display: none;"></p>
<div id="wiz-table-col-line" style="display: none;"></div>
<div id="wiz-table-row-line" style="display: none;"></div>
<div id="wiz-table-range-border_start" style="display: none;">
<div id="wiz-table-range-border_start_top"></div>
<div id="wiz-table-range-border_start_right"></div>
<div id="wiz-table-range-border_start_bottom"></div>
<div id="wiz-table-range-border_start_left"></div>
<div id="wiz-table-range-border_start_dot"></div>
</div>
<div id="wiz-table-range-border_range" style="display: none;">
<div id="wiz-table-range-border_range_top"></div>
<div id="wiz-table-range-border_range_right"></div>
<div id="wiz-table-range-border_range_bottom"></div>
<div id="wiz-table-range-border_range_left"></div>
<div id="wiz-table-range-border_range_dot"></div>
</div>
<p></wiz_tmp_tag></p>
                        </div>
                                                <div class="footer clearfix">
                            <div class="tags float-left">
                                <span>标签：</span>
                                <a href="/tag/linux/" rel="tag">linux</a> <a href="/tag/pt/" rel="tag">pt</a> <a href="/tag/vps/" rel="tag">vps</a> <a href="/tag/vultr/" rel="tag">vultr</a> <a href="/tag/wordpress/" rel="tag">wordpress</a> <a href="/tag/%e4%b8%8b%e8%bd%bd/" rel="tag">下载</a> <a href="/tag/blog/" rel="tag">博客</a> <a href="/tag/%e7%bd%91%e7%ab%99/" rel="tag">网站</a> <a href="/tag/%e8%84%9a%e6%9c%ac/" rel="tag">脚本</a> <a href="/tag/%e9%82%ae%e4%bb%b6/" rel="tag">邮件</a>                            </div>
                            <div class="tool float-right d-none d-lg-block">
                                <span>最后更新：2022年4月5日</span>
                            </div>
                        </div>
                    </div>
                                <div class="toolbar clearfix">
	<div class="meta float-md-left">
		<img src="https://sdn.geekzu.org/avatar/8dc48ab2afc8d5058df4be411bc61a15?s=96&r=g">
		<p class="name">SSJ</p>
		<p class="motto mb-0">不积跬步无以至千里</p>
	</div>
	<div class="share float-md-right text-center">
				<a href="javascript:;" id="thumbs" data-action="love" data-id="1588" role="button" class="btn btn-thumbs "><i class="kicon i-like"></i><span class="ml-1">点赞</span></a>
	</div>
</div>
                <nav class="navigation post-navigation clearfix" role="navigation">
                    <div class="nav-previous clearfix"><a title="插件:[耗尽性能]DNUI (Delete Not Used Image)删除无用图片" href="/2017/12/%e6%8f%92%e4%bb%b6%e8%80%97%e5%b0%bd%e6%80%a7%e8%83%bddnui-delete-not-used-image%e5%88%a0%e9%99%a4%e6%97%a0%e7%94%a8%e5%9b%be%e7%89%87/">< 上一篇</a></div><div class="nav-next"><a title="禁用 medium_large_size_w参数 禁止Wordpress自动生成768宽度缩略图" href="/2017/12/%e7%a6%81%e7%94%a8medium_large_size_w%e8%ae%a9wordpress%e4%b8%8d%e5%86%8d%e7%94%9f%e6%88%90768%e5%ae%bd%e5%ba%a6%e7%bc%a9%e7%95%a5%e5%9b%be/">下一篇 ></a></div>                </nav>
                            </div>
                    </div>
    </div>
</div>
<div class="k-footer">
    <div class="f-toolbox">
        <div class="gotop ">
            <div class="gotop-btn">
                <span class="kicon i-up"></span>
            </div>
        </div>
                <div class="search">
            <span class="kicon i-find"></span>
            <form class="search-form" role="search" method="get" action="/">
                <input type="text" name="s" id="search-footer" placeholder="搜点什么呢?" style="display:none" />
            </form>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <p class="social">
                                    </p>
                <p>COPYRIGHT © 2022 luoji.men. ALL RIGHTS RESERVED.</p><p>Theme <a href="https://github.com/seatonjiang/kratos" target="_blank" rel="nofollow">Kratos</a> Made By <a href="https://seatonjiang.com" target="_blank" rel="nofollow">Seaton Jiang</a></p><script></script>            </div>
        </div>
    </div>
</div>
<script type='text/javascript' id='urvanov_syntax_highlighter_js-js-extra'>
/* <![CDATA[ */
var UrvanovSyntaxHighlighterSyntaxSettings = {"version":"2.8.27","is_admin":"0","ajaxurl":"https:\/\/luojimen.netlify.app\/wp-admin\/admin-ajax.php","prefix":"urvanov-syntax-highlighter-","setting":"urvanov-syntax-highlighter-setting","selected":"urvanov-syntax-highlighter-setting-selected","changed":"urvanov-syntax-highlighter-setting-changed","special":"urvanov-syntax-highlighter-setting-special","orig_value":"data-orig-value","debug":""};
var UrvanovSyntaxHighlighterSyntaxStrings = {"copy":"Copied to the clipboard","minimize":"\u70b9\u51fb\u5c55\u5f00\u4ee3\u7801"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/urvanov-syntax-highlighter/js/min/urvanov_syntax_highlighter.min.js?ver=2.8.27' id='urvanov_syntax_highlighter_js-js'></script>
<script type='text/javascript' id='image-sizes-js-extra'>
/* <![CDATA[ */
var IMAGE_SIZES = {"version":"3.5","disables":["thumbnail","medium","medium_large","large","1536x1536","2048x2048","kratos-thumbnail"]};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/image-sizes/assets/js/front.min.js?ver=3.5' id='image-sizes-js'></script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/bootstrap.bundle.min.js?ver=4.5.0' id='bootstrap-bundle-js'></script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/layer.min.js?ver=3.1.1' id='layer-js'></script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/DPlayer.min.js?ver=4.1.2' id='dplayer-js'></script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/lightgallery.min.js?ver=1.4.0' id='lightgallery-js'></script>
<script type='text/javascript' id='kratos-js-extra'>
/* <![CDATA[ */
var kratos = {"site":"https:\/\/luojimen.netlify.app","directory":"https:\/\/cdn.seatonjiang.com\/kratos\/4.1.2","alipay":"https:\/\/luoji.men\/wp-content\/themes\/kratos-4.1.2\/assets\/img\/200.png","wechat":"https:\/\/luoji.men\/wp-content\/themes\/kratos-4.1.2\/assets\/img\/200.png","repeat":"\u60a8\u5df2\u7ecf\u8d5e\u8fc7\u4e86","thanks":"\u611f\u8c22\u60a8\u7684\u652f\u6301","donate":"\u6253\u8d4f\u4f5c\u8005","scan":"\u626b\u7801\u652f\u4ed8"};
/* ]]> */
</script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/kratos.js?ver=4.1.2' id='kratos-js'></script>
<script type='text/javascript' id='comment-js-extra'>
/* <![CDATA[ */
var ajaxcomment = {"ajax_url":"https:\/\/luojimen.netlify.app\/wp-admin\/admin-ajax.php","order":"asc","compost":"\u8bc4\u8bba\u6b63\u5728\u63d0\u4ea4\u4e2d","comsucc":"\u8bc4\u8bba\u63d0\u4ea4\u6210\u529f"};
/* ]]> */
</script>
<script type='text/javascript' src='https://cdn.seatonjiang.com/kratos/4.1.2/assets/js/comments.min.js?ver=4.1.2' id='comment-js'></script>
<script type='text/javascript' src='https://zz.bdstatic.com/linksubmit/push.js?ver=6.0.2' id='baidu_zz_push-js'></script>
</body>

</html>
